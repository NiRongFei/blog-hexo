<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/blog-hexo/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/blog-hexo/images/favicon-32x32.ico"><link rel="icon" type="image/png" sizes="16x16" href="/blog-hexo/images/favicon-16x16.ico"><link rel="mask-icon" href="/blog-hexo/images/logo.svg" color="#222"><link rel="stylesheet" href="/blog-hexo/css/main.css"><link rel="stylesheet" href="/blog-hexo/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"www.nirongfei.site",root:"/blog-hexo/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="知之真切笃实处即是行 行之明觉精察处即是知"><meta property="og:type" content="website"><meta property="og:title" content="阳明先生"><meta property="og:url" content="https://www.nirongfei.site/blog-hexo/page/2/index.html"><meta property="og:site_name" content="阳明先生"><meta property="og:description" content="知之真切笃实处即是行 行之明觉精察处即是知"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="阳明先生"><meta property="article:tag" content="阳明先生 知行合一 知之真切笃实处即是行 行之明觉精察处即是知"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.nirongfei.site/blog-hexo/page/2/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,lang:"zh-CN"}</script><title>阳明先生</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/blog-hexo/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">阳明先生</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">知行合一</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog-hexo/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/blog-hexo/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/blog-hexo/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/blog-hexo/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li></ul></nav></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content index posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.nirongfei.site/blog-hexo/2018/05/27/frontend/180527/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog-hexo/images/avatar.png"><meta itemprop="name" content="阳明先生"><meta itemprop="description" content="知之真切笃实处即是行 行之明觉精察处即是知"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="阳明先生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/blog-hexo/2018/05/27/frontend/180527/" class="post-title-link" itemprop="url">前端开发技巧-Photoshop</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-27 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-27T00:00:00+08:00">2018-05-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-11-18 15:57:04" itemprop="dateModified" datetime="2020-11-18T15:57:04+08:00">2020-11-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog-hexo/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><h3 id="文件快捷键"><a href="#文件快捷键" class="headerlink" title="文件快捷键"></a>文件快捷键</h3><ul><li>退出程序：<code>ctrl/cmd + q</code></li><li>打开文件：<code>ctrl/cmd + o</code></li><li>关闭文件：<code>ctrl/cmd + w</code></li><li>新建文件：<code>ctrl/cmd + n</code></li><li>保存文件：<code>ctrl/cmd + s</code></li><li>保存副本：<code>ctrl/cmd + alt + s</code></li><li>保存其他：<code>ctrl/cmd + shift + s</code></li><li>保存切图：<code>ctrl/cmd + shift + alt + s</code></li></ul><h3 id="工具快捷键"><a href="#工具快捷键" class="headerlink" title="工具快捷键"></a>工具快捷键</h3><ul><li>移动工具：<code>v</code></li><li>选框工具：<code>m</code></li><li>套索工具：<code>l</code></li><li>魔棒工具：<code>w</code></li><li>切片工具：<code>c</code></li><li>吸管工具：<code>i</code></li><li>修复工具：<code>j</code></li><li>画笔工具：<code>b</code></li><li>图章工具：<code>s</code></li><li>历史工具：<code>y</code></li><li>橡皮工具：<code>e</code></li><li>渐变工具：<code>g</code></li><li>减淡工具：<code>o</code></li><li>钢笔工具：<code>p</code></li><li>文字工具：<code>t</code></li><li>路径工具：<code>a</code></li><li>矩形工具：<code>u</code></li><li>抓手工具：<code>h</code></li><li>缩放工具：<code>z</code></li></ul><h3 id="编辑快捷键"><a href="#编辑快捷键" class="headerlink" title="编辑快捷键"></a>编辑快捷键</h3><ul><li>复制：<code>ctrl/cmd + c</code></li><li>剪切：<code>ctrl/cmd + x</code></li><li>粘贴：<code>ctrl/cmd + v</code></li><li>撤销：<code>ctrl/cmd + z</code></li><li>向后撤销：<code>ctrl/cmd + alt + z</code></li><li>向前撤销：<code>ctrl/cmd + shift + z</code></li><li>合并复制：<code>ctrl/cmd + shift + c</code></li><li>原位粘贴：<code>ctrl/cmd + shift + v</code></li></ul><h3 id="选择快捷键"><a href="#选择快捷键" class="headerlink" title="选择快捷键"></a>选择快捷键</h3><ul><li>全部选择：<code>ctrl/cmd + a</code></li><li>取消选择：<code>ctrl/cmd + d</code></li><li>重新选择：<code>ctrl/cmd + shift + d</code></li><li>反向选择：<code>ctrl/cmd + shift + i</code></li><li>羽化选择：<code>ctrl/cmd + alt + d</code></li></ul><h3 id="视图快捷键"><a href="#视图快捷键" class="headerlink" title="视图快捷键"></a>视图快捷键</h3><ul><li>放大视图：<code>ctrl/cmd + +</code></li><li>缩小视图：<code>ctrl/cmd + -</code></li><li>满屏显示：<code>ctrl/cmd + 0</code></li><li>实际显示：<code>ctrl/cmd + 1</code></li><li>显示隐藏标尺：<code>ctrl/cmd + r</code></li><li>显示隐藏网格：<code>ctrl/cmd + &quot;</code></li><li>显示隐藏参考线：<code>ctrl/cmd + :</code></li><li>显示隐藏选择区域：<code>ctrl/cmd + h</code></li></ul><h3 id="图层快捷键"><a href="#图层快捷键" class="headerlink" title="图层快捷键"></a>图层快捷键</h3><ul><li>复制图层：<code>ctrl/cmd + j</code></li><li>合并图层：<code>ctrl/cmd + e</code></li><li>变换图层：<code>ctrl/cmd + t</code></li><li>新建图层：<code>ctrl/cmd + shift + n</code></li><li>查找图层：<code>ctrl/cmd + alt + shift + f</code></li><li>选择全部图层：<code>ctrl/cmd + alt + a</code></li></ul><h3 id="其它快捷键"><a href="#其它快捷键" class="headerlink" title="其它快捷键"></a>其它快捷键</h3><ul><li>每次切图操作开始时，使用 <code>ctrl/cmd + +/-</code> 缩放到想要的视图大小；</li><li>每次切图操作执行时，使用 <code>c</code> 切片工具对目标进行裁剪；</li><li>每次切图操作结束时，使用 <code>ctrl/cmd + shift + alt + s</code> 保存切图；</li><li>很多切图技巧都是靠平时积累，快捷键靠多记多用，用得多自然会顺手；</li><li>遇到难以分离的图层，最好问问设计师实现原理是怎样的，再一步一步解锁图层；</li><li>不要老是吐槽设计师切得不好切成自己不想要的，想要规范的切图自己动手来切；</li><li>切图需要细心，<code>1px</code> 都要切好，不要随便切切，细节决定成败，也是体现工作质量的表现；</li><li>每次切图完成都不要保存，可通过历史记录回到文件打开的最初状态，重新裁剪下一个切片；</li><li>以下技巧里提到的元素通通指一个切片集合(可由单个图层、多个图层、单个图层部分、多个图层部分组成)；</li></ul><h2 id="操作技巧"><a href="#操作技巧" class="headerlink" title="操作技巧"></a>操作技巧</h2><h3 id="快速选择单个图层"><a href="#快速选择单个图层" class="headerlink" title="快速选择单个图层"></a>快速选择单个图层</h3><p>场景：单个元素选择(单图层组成的图标、按钮、背景图)</p><p>准备：首次使用时先配置</p><ul><li>移动工具(v) → 勾选自动选择 → 选择图层</li></ul><p>步骤：</p><ul><li>选择目标：alt + 左击目标 (移步到图层视图，此时已选中所需图层)</li><li>隐层图层：alt + 左击当前图层的显示图标 (此时已在透明前景色显示目标)</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/8/30/16ce139532d25b33?imageslim"></p><h3 id="快速选择复合图层"><a href="#快速选择复合图层" class="headerlink" title="快速选择复合图层"></a>快速选择复合图层</h3><blockquote><p>首次使用时需配置：同上</p></blockquote><p>场景：复合元素选择(多图层组成的图标、按钮、背景图)</p><p>准备：首次使用时先配置</p><ul><li>移动工具(v) → 勾选自动选择 → 选择图层</li></ul><p>步骤：</p><ul><li>选择目标：<code>alt</code> + 左击目标 (移步到图层视图，此时已选中所需图层)</li><li>选择图层：<code>ctrl/cmd</code> + 左击图层 (选中所有需要合并的图层)</li><li>合并图层：<code>ctrl/cmd + e</code> (生成新的目标图层)</li><li>隐层图层：<code>alt</code> + 左击当前图层的显示图标 (此时已在透明前景色显示目标)</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/8/30/16ce18ae1adfe2ac?imageslim"></p><h3 id="快速复制切片副本"><a href="#快速复制切片副本" class="headerlink" title="快速复制切片副本"></a>快速复制切片副本</h3><p>场景：同尺寸元素收集</p><p>步骤：</p><ul><li>复制切片：<code>alt</code> + 左击切片 (拖动切片副本到下一个目标上)</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/8/30/16ce14780bbde16e?imageslim"></p><h3 id="快速微调切片位置"><a href="#快速微调切片位置" class="headerlink" title="快速微调切片位置"></a>快速微调切片位置</h3><p>场景：切片位置错位需纠正</p><p>步骤：</p><ul><li>1px 微调：方向键</li><li>10px 微调：<code>shift</code> + 方向键</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/8/30/16ce1549ffdfe7a2?imageslim"></p><h3 id="快速均分等量切片"><a href="#快速均分等量切片" class="headerlink" title="快速均分等量切片"></a>快速均分等量切片</h3><p>场景：精灵图均分、大尺寸图片均分</p><p>步骤：</p><ul><li>划分切片：右击切片 → 选择划分切片</li><li>调整网格：输入水平/垂直划分数量</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/8/30/16ce1c949a9e7c17?imageslim"></p><h3 id="快速获取样本颜色"><a href="#快速获取样本颜色" class="headerlink" title="快速获取样本颜色"></a>快速获取样本颜色</h3><p>场景：颜色获取</p><p>步骤：</p><ul><li>打开吸管工具：<code>i</code> (点击需要获取颜色的位置)</li><li>切换色彩面板：F6 (色彩面板已打开可忽略此步骤)</li><li>获取颜色：左击前景色 (直接复制粘贴)</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/8/30/16ce1d5db58d21f1?imageslim"></p><h3 id="快速获取文字信息"><a href="#快速获取文字信息" class="headerlink" title="快速获取文字信息"></a>快速获取文字信息</h3><p>场景：文字信息获取</p><p>步骤：</p><ul><li>打开文字工具：<code>t</code></li><li>定位文字：左击文字 (点击时需要点中文字中间的位置，否则可能生成新的文字图层)</li><li>切换文字面板：F6 (文字面板已打开可忽略此步骤)</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/8/30/16ce1dcc537d5622?imageslim"></p><h3 id="快速取消图层关联"><a href="#快速取消图层关联" class="headerlink" title="快速取消图层关联"></a>快速取消图层关联</h3><p>场景：图层关联起来无法单独分离</p><p>步骤：</p><ul><li>定位图层：鼠标挪到目标图层和关联图层的中间 (移步到图层视图中处理)</li><li>取消关联：<code>alt</code> + 左击两图层中间 (出现解锁关联图标时点击)</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/8/30/16ce1e60f628a69c?imageslim"></p><h3 id="快速自动切取图标"><a href="#快速自动切取图标" class="headerlink" title="快速自动切取图标"></a>快速自动切取图标</h3><p>场景：大量图标分离</p><p>准备：首次使用时先配置</p><ul><li>编辑 → 首选项 → 增效工具 → 勾选启用生成器</li><li>重启 PS</li><li>文件 → 生成 → 图像资源</li><li>以后步骤命名图层/组后自动生成切片(无需理会)</li></ul><p>步骤：</p><ul><li>自动保存 JPG：图层/组使用 xxx.jpg 命名(调整图片质量需在后缀加上数字，如 60%质量的切片命名为 xxx.jpg6)</li><li>自动保存 PNG：图层/组使用 xxx.png8 或 xxx.png24 命名</li><li>自动保存 SVG：图层/组使用 xxx.svg 命名</li><li>自动保存倍数图：图层/组使用 <a href="mailto:&#x78;&#120;&#120;&#x40;&#x32;&#x78;&#46;&#x70;&#x6e;&#x67;">&#x78;&#120;&#120;&#x40;&#x32;&#x78;&#46;&#x70;&#x6e;&#x67;</a>、xxx@3x.png 命名</li></ul><h3 id="快速批量处理图片"><a href="#快速批量处理图片" class="headerlink" title="快速批量处理图片"></a>快速批量处理图片</h3><p>场景：大批量无脑操作图片处理</p><p>准备：首次使用时先记录动作样本</p><ul><li>动作面板(F9) → 新建动作 → 录制动作(操作一波切图流程) → 停止记录</li></ul><p>步骤：</p><ul><li>选择批处理：文件 → 自动 → 批处理</li><li>选择处理动作：1</li><li>选择源文件：2</li><li>选择输出文件：3</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/8/30/16ce21638220e109?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p><h3 id="快速扣取毛发背景"><a href="#快速扣取毛发背景" class="headerlink" title="快速扣取毛发背景"></a>快速扣取毛发背景</h3><p>场景：包含毛发的背景分离</p><p>步骤：操作较为复杂，这里是<a target="_blank" rel="noopener" href="https://www.ui.cn/detail/424089.html">教程</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.nirongfei.site/blog-hexo/2018/05/20/frontend/180520/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog-hexo/images/avatar.png"><meta itemprop="name" content="阳明先生"><meta itemprop="description" content="知之真切笃实处即是行 行之明觉精察处即是知"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="阳明先生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/blog-hexo/2018/05/20/frontend/180520/" class="post-title-link" itemprop="url">前端开发技巧-Javascript</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-20 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-20T00:00:00+08:00">2018-05-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-11-18 15:57:04" itemprop="dateModified" datetime="2020-11-18T15:57:04+08:00">2020-11-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog-hexo/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>10k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>9 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="对比时间"><a href="#对比时间" class="headerlink" title="对比时间"></a>对比时间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> time1 = <span class="string">&#x27;2019-02-14 21:00:00&#x27;</span></span><br><span class="line"><span class="keyword">const</span> time2 = <span class="string">&#x27;2019-05-01 09:00:00&#x27;</span></span><br><span class="line"><span class="keyword">const</span> overtime = time1 &gt; time2</span><br><span class="line"><span class="comment">// overtime =&gt; false</span></span><br></pre></td></tr></table></figure><h3 id="格式化金钱"><a href="#格式化金钱" class="headerlink" title="格式化金钱"></a>格式化金钱</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ThousandNum = <span class="function"><span class="params">num</span> =&gt;</span> num.toString().replace(<span class="regexp">/\B(?=(\d&#123;3&#125;)+(?!\d))/g</span>, <span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> money = ThousandNum(<span class="number">20190214</span>)</span><br><span class="line"><span class="comment">// money =&gt; &quot;20,190,214&quot;</span></span><br></pre></td></tr></table></figure><h3 id="生成随机-ID"><a href="#生成随机-ID" class="headerlink" title="生成随机 ID"></a>生成随机 ID</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> RandomId = <span class="function"><span class="params">len</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substr(<span class="number">2</span>, len)</span><br><span class="line"><span class="keyword">const</span> id = RandomId(<span class="number">10</span>)</span><br><span class="line"><span class="comment">// id =&gt; &quot;jg7zpgiqva&quot;</span></span><br></pre></td></tr></table></figure><h3 id="生成随机-HEX-色值"><a href="#生成随机-HEX-色值" class="headerlink" title="生成随机 HEX 色值"></a>生成随机 HEX 色值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> RandomColor = <span class="function">() =&gt;</span></span><br><span class="line">  <span class="string">&#x27;#&#x27;</span> + <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">0xffffff</span>).toString(<span class="number">16</span>).padEnd(<span class="number">6</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> color = RandomColor()</span><br><span class="line"><span class="comment">// color =&gt; &quot;#f03665&quot;</span></span><br></pre></td></tr></table></figure><h3 id="生成星级评分"><a href="#生成星级评分" class="headerlink" title="生成星级评分"></a>生成星级评分</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> StartScore = <span class="function"><span class="params">rate</span> =&gt;</span> <span class="string">&#x27;★★★★★☆☆☆☆☆&#x27;</span>.slice(<span class="number">5</span> - rate, <span class="number">10</span> - rate)</span><br><span class="line"><span class="keyword">const</span> start = StartScore(<span class="number">3</span>)</span><br><span class="line"><span class="comment">// start =&gt; &quot;★★★&quot;</span></span><br></pre></td></tr></table></figure><h3 id="操作-URL-查询参数"><a href="#操作-URL-查询参数" class="headerlink" title="操作 URL 查询参数"></a>操作 URL 查询参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> params = <span class="keyword">new</span> URLSearchParams(location.search.replace(<span class="regexp">/\?/gi</span>, <span class="string">&#x27;&#x27;</span>)) <span class="comment">// location.search = &quot;?name=young&amp;sex=male&quot;</span></span><br><span class="line">params.has(<span class="string">&#x27;young&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">params.get(<span class="string">&#x27;sex&#x27;</span>) <span class="comment">// &quot;male&quot;</span></span><br></pre></td></tr></table></figure><h2 id="数值"><a href="#数值" class="headerlink" title="数值"></a>数值</h2><h3 id="取整"><a href="#取整" class="headerlink" title="取整"></a>取整</h3><p>代替正数的 <code>Math.floor()</code>，代替负数的 <code>Math.ceil()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num1 = ~~<span class="number">1.69</span></span><br><span class="line"><span class="keyword">const</span> num2 = <span class="number">1.69</span> | <span class="number">0</span></span><br><span class="line"><span class="keyword">const</span> num3 = <span class="number">1.69</span> &gt;&gt; <span class="number">0</span></span><br><span class="line"><span class="comment">// num1 num2 num3 =&gt; 1 1 1</span></span><br></pre></td></tr></table></figure><h3 id="补零"><a href="#补零" class="headerlink" title="补零"></a>补零</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> FillZero = <span class="function">(<span class="params">num, len</span>) =&gt;</span> num.toString().padStart(len, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> num = FillZero(<span class="number">169</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment">// num =&gt; &quot;00169&quot;</span></span><br></pre></td></tr></table></figure><h3 id="转数值"><a href="#转数值" class="headerlink" title="转数值"></a>转数值</h3><p>只对 <code>null</code>、<code>&quot;&quot;</code>、<code>false</code>、数值字符串有效</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num1 = +<span class="literal">null</span></span><br><span class="line"><span class="keyword">const</span> num2 = +<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">const</span> num3 = +<span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> num4 = +<span class="string">&#x27;169&#x27;</span></span><br><span class="line"><span class="comment">// num1 num2 num3 num4 =&gt; 0 0 0 169</span></span><br></pre></td></tr></table></figure><h3 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a>时间戳</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> timestamp = +<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2019-02-14&#x27;</span>)</span><br><span class="line"><span class="comment">// timestamp =&gt; 1550102400000</span></span><br></pre></td></tr></table></figure><h3 id="精确小数"><a href="#精确小数" class="headerlink" title="精确小数"></a>精确小数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> RoundNum = <span class="function">(<span class="params">num, decimal</span>) =&gt;</span> <span class="built_in">Math</span>.round(num * <span class="number">10</span> ** decimal) / <span class="number">10</span> ** decimal</span><br><span class="line"><span class="keyword">const</span> num = RoundNum(<span class="number">1.69</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment">// num =&gt; 1.7</span></span><br></pre></td></tr></table></figure><h3 id="判断奇偶"><a href="#判断奇偶" class="headerlink" title="判断奇偶"></a>判断奇偶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OddEven = <span class="function"><span class="params">num</span> =&gt;</span> (!!(num &amp; <span class="number">1</span>) ? <span class="string">&#x27;odd&#x27;</span> : <span class="string">&#x27;even&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> num = OddEven(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// num =&gt; &quot;even&quot;</span></span><br></pre></td></tr></table></figure><h3 id="取最小最大值"><a href="#取最小最大值" class="headerlink" title="取最小最大值"></a>取最小最大值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">const</span> min = <span class="built_in">Math</span>.min(...arr)</span><br><span class="line"><span class="keyword">const</span> max = <span class="built_in">Math</span>.max(...arr)</span><br><span class="line"><span class="comment">// min max =&gt; 0 2</span></span><br></pre></td></tr></table></figure><h3 id="生成范围随机数"><a href="#生成范围随机数" class="headerlink" title="生成范围随机数"></a>生成范围随机数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> RandomNum = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min</span><br><span class="line"><span class="keyword">const</span> num = RandomNum(<span class="number">1</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure><h2 id="布尔"><a href="#布尔" class="headerlink" title="布尔"></a>布尔</h2><h3 id="短路运算符"><a href="#短路运算符" class="headerlink" title="短路运算符"></a>短路运算符</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = d &amp;&amp; <span class="number">1</span> <span class="comment">// 满足条件赋值：取假运算，从左到右依次判断，遇到假值返回假值，后面不再执行，否则返回最后一个真值</span></span><br><span class="line"><span class="keyword">const</span> b = d || <span class="number">1</span> <span class="comment">// 默认赋值：取真运算，从左到右依次判断，遇到真值返回真值，后面不再执行，否则返回最后一个假值</span></span><br><span class="line"><span class="keyword">const</span> c = !d <span class="comment">// 取假赋值：单个表达式转换为true则返回false，否则返回true</span></span><br></pre></td></tr></table></figure><h3 id="判断数据类型"><a href="#判断数据类型" class="headerlink" title="判断数据类型"></a>判断数据类型</h3><p>可判断类型：<code>undefined、null、string、number、boolean、array、object、symbol、date、regexp、function、asyncfunction、arguments、set、map、weakset、weakmap</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DataType</span>(<span class="params">tgt, type</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dataType = <span class="built_in">Object</span>.prototype.toString</span><br><span class="line">    .call(tgt)</span><br><span class="line">    .replace(<span class="regexp">/\[object /g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    .replace(<span class="regexp">/\]/g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    .toLowerCase()</span><br><span class="line">  <span class="keyword">return</span> type ? dataType === type : dataType</span><br><span class="line">&#125;</span><br><span class="line">DataType(<span class="string">&#x27;young&#x27;</span>) <span class="comment">// &quot;string&quot;</span></span><br><span class="line">DataType(<span class="number">20190214</span>) <span class="comment">// &quot;number&quot;</span></span><br><span class="line">DataType(<span class="literal">true</span>) <span class="comment">// &quot;boolean&quot;</span></span><br><span class="line">DataType([], <span class="string">&#x27;array&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">DataType(&#123;&#125;, <span class="string">&#x27;array&#x27;</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="是否为空数组"><a href="#是否为空数组" class="headerlink" title="是否为空数组"></a>是否为空数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = []</span><br><span class="line"><span class="keyword">const</span> flag = <span class="built_in">Array</span>.isArray(arr) &amp;&amp; !arr.length</span><br><span class="line"><span class="comment">// flag =&gt; true</span></span><br></pre></td></tr></table></figure><h3 id="是否为空对象"><a href="#是否为空对象" class="headerlink" title="是否为空对象"></a>是否为空对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> flag = DataType(obj, <span class="string">&#x27;object&#x27;</span>) &amp;&amp; !<span class="built_in">Object</span>.keys(obj).length</span><br><span class="line"><span class="comment">// flag =&gt; true</span></span><br></pre></td></tr></table></figure><h3 id="满足条件时执行"><a href="#满足条件时执行" class="headerlink" title="满足条件时执行"></a>满足条件时执行</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flagA = <span class="literal">true</span> <span class="comment">// 条件 A</span></span><br><span class="line"><span class="keyword">const</span> flagB = <span class="literal">false</span> <span class="comment">// 条件 B</span></span><br><span class="line">;(flagA || flagB) &amp;&amp; Func() <span class="comment">// 满足 A 或 B 时执行</span></span><br><span class="line">;(flagA || !flagB) &amp;&amp; Func() <span class="comment">// 满足 A 或不满足 B 时执行</span></span><br><span class="line">flagA &amp;&amp; flagB &amp;&amp; Func() <span class="comment">// 同时满足 A 和 B 时执行</span></span><br><span class="line">flagA &amp;&amp; !flagB &amp;&amp; Func() <span class="comment">// 满足 A 且不满足 B 时执行</span></span><br></pre></td></tr></table></figure><h3 id="为非假值时执行"><a href="#为非假值时执行" class="headerlink" title="为非假值时执行"></a>为非假值时执行</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flag = <span class="literal">false</span> <span class="comment">// undefined、null、&quot;&quot;、0、false、NaN</span></span><br><span class="line">!flag &amp;&amp; Func()</span><br></pre></td></tr></table></figure><h3 id="数组不为空时执行"><a href="#数组不为空时执行" class="headerlink" title="数组不为空时执行"></a>数组不为空时执行</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">arr.length &amp;&amp; Func()</span><br></pre></td></tr></table></figure><h3 id="对象不为空时执行"><a href="#对象不为空时执行" class="headerlink" title="对象不为空时执行"></a>对象不为空时执行</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="built_in">Object</span>.keys(obj).length &amp;&amp; Func()</span><br></pre></td></tr></table></figure><h3 id="函数退出代替条件分支退出"><a href="#函数退出代替条件分支退出" class="headerlink" title="函数退出代替条件分支退出"></a>函数退出代替条件分支退出</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line">  Func()</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 换成</span></span><br><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line">  <span class="keyword">return</span> Func()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="switch-case-使用区间"><a href="#switch-case-使用区间" class="headerlink" title="switch/case 使用区间"></a>switch/case 使用区间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> age = <span class="number">26</span></span><br><span class="line"><span class="keyword">switch</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="built_in">isNaN</span>(age):</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;not a number&#x27;</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> age &lt; <span class="number">18</span>:</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;under age&#x27;</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> age &gt;= <span class="number">18</span>:</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;adult&#x27;</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;please set your age&#x27;</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="克隆数组"><a href="#克隆数组" class="headerlink" title="克隆数组"></a>克隆数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">const</span> arr = [..._arr]</span><br><span class="line"><span class="comment">// arr =&gt; [0, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="合并数组"><a href="#合并数组" class="headerlink" title="合并数组"></a>合并数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">const</span> arr = [...arr1, ...arr2]</span><br><span class="line"><span class="comment">// arr =&gt; [0, 1, 2, 3, 4, 5];</span></span><br></pre></td></tr></table></figure><h3 id="去重数组"><a href="#去重数组" class="headerlink" title="去重数组"></a>去重数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [...new <span class="built_in">Set</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="literal">null</span>, <span class="literal">null</span>])]</span><br><span class="line"><span class="comment">// arr =&gt; [0, 1, null]</span></span><br></pre></td></tr></table></figure><h3 id="混淆数组"><a href="#混淆数组" class="headerlink" title="混淆数组"></a>混淆数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].slice().sort(<span class="function">() =&gt;</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>)</span><br><span class="line"><span class="comment">// arr =&gt; [3, 4, 0, 5, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="清空数组"><a href="#清空数组" class="headerlink" title="清空数组"></a>清空数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">arr.length = <span class="number">0</span></span><br><span class="line"><span class="comment">// arr =&gt; []</span></span><br></pre></td></tr></table></figure><h3 id="截断数组"><a href="#截断数组" class="headerlink" title="截断数组"></a>截断数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">arr.length = <span class="number">2</span></span><br><span class="line"><span class="comment">// arr =&gt; [0, 1]</span></span><br></pre></td></tr></table></figure><h3 id="交换赋值"><a href="#交换赋值" class="headerlink" title="交换赋值"></a>交换赋值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">1</span></span><br><span class="line">;[a, b] = [b, a]</span><br><span class="line"><span class="comment">// a b =&gt; 1 0</span></span><br></pre></td></tr></table></figure><h3 id="过滤空值"><a href="#过滤空值" class="headerlink" title="过滤空值"></a>过滤空值</h3><p>空值：<code>undefined、null、&quot;&quot;、0、false、NaN</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="literal">undefined</span>, <span class="literal">null</span>, <span class="string">&#x27;&#x27;</span>, <span class="number">0</span>, <span class="literal">false</span>, <span class="literal">NaN</span>, <span class="number">1</span>, <span class="number">2</span>].filter(<span class="built_in">Boolean</span>)</span><br><span class="line"><span class="comment">// arr =&gt; [1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="异步累计"><a href="#异步累计" class="headerlink" title="异步累计"></a>异步累计</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">Func</span>(<span class="params">deps</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> deps.reduce(<span class="keyword">async</span> (t, v) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> dep = <span class="keyword">await</span> t</span><br><span class="line">    <span class="keyword">const</span> version = <span class="keyword">await</span> Todo(v)</span><br><span class="line">    dep[v] = version</span><br><span class="line">    <span class="keyword">return</span> dep</span><br><span class="line">  &#125;, <span class="built_in">Promise</span>.resolve(&#123;&#125;))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> result = <span class="keyword">await</span> Func() <span class="comment">// 需在async包围下使用</span></span><br></pre></td></tr></table></figure><h3 id="数组首部插入成员"><a href="#数组首部插入成员" class="headerlink" title="数组首部插入成员"></a>数组首部插入成员</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>] <span class="comment">// 以下方法任选一种</span></span><br><span class="line">arr.unshift(<span class="number">0</span>)</span><br><span class="line">arr = [<span class="number">0</span>].concat(arr)</span><br><span class="line">arr = [<span class="number">0</span>, ...arr]</span><br><span class="line"><span class="comment">// arr =&gt; [0, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="数组尾部插入成员"><a href="#数组尾部插入成员" class="headerlink" title="数组尾部插入成员"></a>数组尾部插入成员</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">0</span>, <span class="number">1</span>] <span class="comment">// 以下方法任选一种</span></span><br><span class="line">arr.push(<span class="number">2</span>)</span><br><span class="line">arr.concat(<span class="number">2</span>)</span><br><span class="line">arr[arr.length] = <span class="number">2</span></span><br><span class="line">arr = [...arr, <span class="number">2</span>]</span><br><span class="line"><span class="comment">// arr =&gt; [0, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="统计数组成员个数"><a href="#统计数组成员个数" class="headerlink" title="统计数组成员个数"></a>统计数组成员个数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">const</span> count = arr.reduce(<span class="function">(<span class="params">t, c</span>) =&gt;</span> &#123;</span><br><span class="line">  t[c] = t[c] ? ++t[c] : <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> t</span><br><span class="line">&#125;, &#123;&#125;)</span><br><span class="line"><span class="comment">// count =&gt; &#123; 0: 1, 1: 2, 2: 3 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="解构数组成员嵌套"><a href="#解构数组成员嵌套" class="headerlink" title="解构数组成员嵌套"></a>解构数组成员嵌套</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]]]</span><br><span class="line"><span class="keyword">const</span> [a, b, [c, d, [e, f]]] = arr</span><br><span class="line"><span class="comment">// a b c d e f =&gt; 0 1 2 3 4 5</span></span><br></pre></td></tr></table></figure><h3 id="解构数组成员别名"><a href="#解构数组成员别名" class="headerlink" title="解构数组成员别名"></a>解构数组成员别名</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="number">0</span>: a, <span class="number">1</span>: b, <span class="number">2</span>: c &#125; = arr</span><br><span class="line"><span class="comment">// a b c =&gt; 0 1 2</span></span><br></pre></td></tr></table></figure><h3 id="解构数组成员默认值"><a href="#解构数组成员默认值" class="headerlink" title="解构数组成员默认值"></a>解构数组成员默认值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">const</span> [a, b, c = <span class="number">3</span>, d = <span class="number">4</span>] = arr</span><br><span class="line"><span class="comment">// a b c d =&gt; 0 1 2 4</span></span><br></pre></td></tr></table></figure><h3 id="获取随机数组成员"><a href="#获取随机数组成员" class="headerlink" title="获取随机数组成员"></a>获取随机数组成员</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">const</span> randomItem = arr[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length)]</span><br><span class="line"><span class="comment">// randomItem =&gt; 1</span></span><br></pre></td></tr></table></figure><h3 id="创建指定长度数组"><a href="#创建指定长度数组" class="headerlink" title="创建指定长度数组"></a>创建指定长度数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [...new <span class="built_in">Array</span>(<span class="number">3</span>).keys()]</span><br><span class="line"><span class="comment">// arr =&gt; [0, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="创建指定长度且值相等的数组"><a href="#创建指定长度且值相等的数组" class="headerlink" title="创建指定长度且值相等的数组"></a>创建指定长度且值相等的数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="number">0</span>)</span><br><span class="line"><span class="comment">// arr =&gt; [0, 0, 0]</span></span><br></pre></td></tr></table></figure><h3 id="reduce-代替-map-和-filter"><a href="#reduce-代替-map-和-filter" class="headerlink" title="reduce 代替 map 和 filter"></a>reduce 代替 map 和 filter</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// map</span></span><br><span class="line"><span class="keyword">const</span> arr = _arr.map(<span class="function"><span class="params">v</span> =&gt;</span> v * <span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> arr = _arr.reduce(<span class="function">(<span class="params">t, c</span>) =&gt;</span> &#123;</span><br><span class="line">  t.push(c * <span class="number">2</span>)</span><br><span class="line">  <span class="keyword">return</span> t</span><br><span class="line">&#125;, [])</span><br><span class="line"><span class="comment">// arr =&gt; [0, 2, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// filter</span></span><br><span class="line"><span class="keyword">const</span> arr = _arr.filter(<span class="function"><span class="params">v</span> =&gt;</span> v &gt; <span class="number">0</span>)</span><br><span class="line"><span class="keyword">const</span> arr = _arr.reduce(<span class="function">(<span class="params">t, c</span>) =&gt;</span> &#123;</span><br><span class="line">  c &gt; <span class="number">0</span> &amp;&amp; t.push(c)</span><br><span class="line">  <span class="keyword">return</span> t</span><br><span class="line">&#125;, [])</span><br><span class="line"><span class="comment">// arr =&gt; [1, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// map和filter</span></span><br><span class="line"><span class="keyword">const</span> arr = _arr.map(<span class="function"><span class="params">v</span> =&gt;</span> v * <span class="number">2</span>).filter(<span class="function"><span class="params">v</span> =&gt;</span> v &gt; <span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> arr = _arr.reduce(<span class="function">(<span class="params">t, c</span>) =&gt;</span> &#123;</span><br><span class="line">  c = c * <span class="number">2</span></span><br><span class="line">  c &gt; <span class="number">2</span> &amp;&amp; t.push(c)</span><br><span class="line">  <span class="keyword">return</span> t</span><br><span class="line">&#125;, [])</span><br><span class="line"><span class="comment">// arr =&gt; [4]</span></span><br></pre></td></tr></table></figure><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><h3 id="克隆对象"><a href="#克隆对象" class="headerlink" title="克隆对象"></a>克隆对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125; <span class="comment">// 以下方法任选一种</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; ..._obj &#125;</span><br><span class="line"><span class="keyword">const</span> obj = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(_obj))</span><br><span class="line"><span class="comment">// obj =&gt; &#123; a: 0, b: 1, c: 2 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="合并对象"><a href="#合并对象" class="headerlink" title="合并对象"></a>合并对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">c</span>: <span class="number">3</span>, <span class="attr">d</span>: <span class="number">4</span>, <span class="attr">e</span>: <span class="number">5</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123; ...obj1, ...obj2 &#125;</span><br><span class="line"><span class="comment">// obj =&gt; &#123; a: 0, b: 1, c: 3, d: 4, e: 5 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="对象字面量"><a href="#对象字面量" class="headerlink" title="对象字面量"></a>对象字面量</h3><p>获取环境变量时必用此方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> env = <span class="string">&#x27;prod&#x27;</span></span><br><span class="line"><span class="keyword">const</span> link = &#123;</span><br><span class="line">  dev: <span class="string">&#x27;Development Address&#x27;</span>,</span><br><span class="line">  test: <span class="string">&#x27;Testing Address&#x27;</span>,</span><br><span class="line">  prod: <span class="string">&#x27;Production Address&#x27;</span></span><br><span class="line">&#125;[env]</span><br><span class="line"><span class="comment">// link =&gt; &quot;Production Address&quot;</span></span><br></pre></td></tr></table></figure><h3 id="对象变量属性"><a href="#对象变量属性" class="headerlink" title="对象变量属性"></a>对象变量属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flag = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  a: <span class="number">0</span>,</span><br><span class="line">  b: <span class="number">1</span>,</span><br><span class="line">  [flag ? <span class="string">&#x27;c&#x27;</span> : <span class="string">&#x27;d&#x27;</span>]: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// obj =&gt; &#123; a: 0, b: 1, d: 2 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="创建纯空对象"><a href="#创建纯空对象" class="headerlink" title="创建纯空对象"></a>创建纯空对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line"><span class="built_in">Object</span>.prototype.a = <span class="number">0</span></span><br><span class="line"><span class="comment">// obj =&gt; &#123;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="删除对象无用属性"><a href="#删除对象无用属性" class="headerlink" title="删除对象无用属性"></a>删除对象无用属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125; <span class="comment">// 只想拿b和c</span></span><br><span class="line"><span class="keyword">const</span> &#123; a, ...rest &#125; = obj</span><br><span class="line"><span class="comment">// rest =&gt; &#123; b: 1, c: 2 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="解构对象属性嵌套"><a href="#解构对象属性嵌套" class="headerlink" title="解构对象属性嵌套"></a>解构对象属性嵌套</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: &#123; <span class="attr">d</span>: <span class="number">2</span>, <span class="attr">e</span>: <span class="number">3</span> &#125; &#125;</span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  c: &#123; d, e &#125;</span><br><span class="line">&#125; = obj</span><br><span class="line"><span class="comment">// d e =&gt; 2 3</span></span><br></pre></td></tr></table></figure><h3 id="解构对象属性别名"><a href="#解构对象属性别名" class="headerlink" title="解构对象属性别名"></a>解构对象属性别名</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">const</span> &#123; a, <span class="attr">b</span>: d, <span class="attr">c</span>: e &#125; = obj</span><br><span class="line"><span class="comment">// a d e =&gt; 0 1 2</span></span><br></pre></td></tr></table></figure><h3 id="解构对象属性默认值"><a href="#解构对象属性默认值" class="headerlink" title="解构对象属性默认值"></a>解构对象属性默认值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">const</span> &#123; a, b = <span class="number">2</span>, d = <span class="number">3</span> &#125; = obj</span><br><span class="line"><span class="comment">// a b d =&gt; 0 1 3</span></span><br></pre></td></tr></table></figure><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="函数自执行"><a href="#函数自执行" class="headerlink" title="函数自执行"></a>函数自执行</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Func = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)() <span class="comment">// 常用</span></span><br><span class="line"></span><br><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)() <span class="comment">// 常用</span></span><br><span class="line">;[(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()]</span><br><span class="line">;+(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br><span class="line">;-(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br><span class="line">~(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br><span class="line">!(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br><span class="line"><span class="keyword">void</span> (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br><span class="line"><span class="keyword">typeof</span> (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br><span class="line"><span class="keyword">delete</span> (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>, (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br><span class="line"><span class="number">1</span> ^ (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br><span class="line"><span class="number">1</span> &gt; (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)()</span><br></pre></td></tr></table></figure><h3 id="隐式返回值"><a href="#隐式返回值" class="headerlink" title="隐式返回值"></a>隐式返回值</h3><p>只能用于单语句返回值箭头函数，如果返回值是对象必须使用()包住</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Func = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;I Love &#x27;</span> + name</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 换成</span></span><br><span class="line"><span class="keyword">const</span> Func = <span class="function"><span class="params">name</span> =&gt;</span> <span class="string">&#x27;I Love &#x27;</span> + name</span><br></pre></td></tr></table></figure><h3 id="一次性函数"><a href="#一次性函数" class="headerlink" title="一次性函数"></a>一次性函数</h3><p>适用于运行一些只需执行一次的初始化代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">  Func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="惰性载入函数"><a href="#惰性载入函数" class="headerlink" title="惰性载入函数"></a>惰性载入函数</h3><p>函数内判断分支较多较复杂时可大大节约资源开销</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (a === b) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 换成</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (a === b) &#123;</span><br><span class="line">    Func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    Func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> Func()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="检测非空参数"><a href="#检测非空参数" class="headerlink" title="检测非空参数"></a>检测非空参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IsRequired</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;param is required&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Func</span>(<span class="params">name = IsRequired()</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;I Love &#x27;</span> + name)</span><br><span class="line">&#125;</span><br><span class="line">Func() <span class="comment">// &quot;param is required&quot;</span></span><br><span class="line">Func(<span class="string">&#x27;You&#x27;</span>) <span class="comment">// &quot;I Love You&quot;</span></span><br></pre></td></tr></table></figure><h3 id="字符串创建函数"><a href="#字符串创建函数" class="headerlink" title="字符串创建函数"></a>字符串创建函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Func = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;console.log(&quot;I Love &quot; + name)&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="优雅处理错误信息"><a href="#优雅处理错误信息" class="headerlink" title="优雅处理错误信息"></a>优雅处理错误信息</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  Func()</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  location.href = <span class="string">&#x27;https://stackoverflow.com/search?q=[js]+&#x27;</span> + e.message</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="优雅处理-Async-Await-参数"><a href="#优雅处理-Async-Await-参数" class="headerlink" title="优雅处理 Async/Await 参数"></a>优雅处理 Async/Await 参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AsyncTo</span>(<span class="params">promise</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> promise.then(<span class="function"><span class="params">data</span> =&gt;</span> [<span class="literal">null</span>, data]).catch(<span class="function"><span class="params">err</span> =&gt;</span> [err])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [err, res] = <span class="keyword">await</span> AsyncTo(Func())</span><br></pre></td></tr></table></figure><h3 id="优雅处理多个函数返回值"><a href="#优雅处理多个函数返回值" class="headerlink" title="优雅处理多个函数返回值"></a>优雅处理多个函数返回值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.all([fetch(<span class="string">&#x27;/user&#x27;</span>), fetch(<span class="string">&#x27;/comment&#x27;</span>)])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [user, comment] = <span class="keyword">await</span> Func() <span class="comment">// 需在async包围下使用</span></span><br></pre></td></tr></table></figure><h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><h3 id="显示全部-DOM-边框"><a href="#显示全部-DOM-边框" class="headerlink" title="显示全部 DOM 边框"></a>显示全部 DOM 边框</h3><p>调试页面元素边界时使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;[].forEach.call($$(<span class="string">&#x27;*&#x27;</span>), <span class="function"><span class="params">dom</span> =&gt;</span> &#123;</span><br><span class="line">  dom.style.outline = <span class="string">&#x27;1px solid #&#x27;</span> + (~~(<span class="built_in">Math</span>.random() * (<span class="number">1</span> &lt;&lt; <span class="number">24</span>))).toString(<span class="number">16</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="自适应页面"><a href="#自适应页面" class="headerlink" title="自适应页面"></a>自适应页面</h3><p>页面基于一张设计图但需做多款机型自适应，元素尺寸使用 <code>rem</code> 进行设置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AutoResponse</span>(<span class="params">width = <span class="number">750</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> target = <span class="built_in">document</span>.documentElement</span><br><span class="line">  target.clientWidth &gt;= <span class="number">600</span></span><br><span class="line">    ? (target.style.fontSize = <span class="string">&#x27;80px&#x27;</span>)</span><br><span class="line">    : (target.style.fontSize = (target.clientWidth / width) * <span class="number">100</span> + <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="过滤-XSS"><a href="#过滤-XSS" class="headerlink" title="过滤 XSS"></a>过滤 XSS</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FilterXss</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> elem = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">  elem.innerText = content</span><br><span class="line">  <span class="keyword">const</span> result = elem.innerHTML</span><br><span class="line">  elem = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="存取-LocalStorage"><a href="#存取-LocalStorage" class="headerlink" title="存取 LocalStorage"></a>存取 LocalStorage</h3><p>反序列化取，序列化存</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> love = <span class="built_in">JSON</span>.parse(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;love&#x27;</span>))</span><br><span class="line"><span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;love&#x27;</span>, <span class="built_in">JSON</span>.stringify(<span class="string">&#x27;I Love You&#x27;</span>))</span><br></pre></td></tr></table></figure><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><h3 id="模拟键盘"><a href="#模拟键盘" class="headerlink" title="模拟键盘"></a>模拟键盘</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="params">_</span> =&gt;</span></span><br><span class="line">  [...<span class="string">&quot;`1234567890-=~~QWERTYUIOP[]\\~ASDFGHJKL;&#x27;~~ZXCVBNM,./~&quot;</span>].map(</span><br><span class="line">    x =&gt;</span><br><span class="line">      ((o += <span class="string">`/<span class="subst">$&#123;(b = <span class="string">&#x27;_&#x27;</span>.repeat(</span></span></span><br><span class="line"><span class="string"><span class="subst">        (w = x &lt; y ? <span class="number">2</span> : <span class="string">&#x27; 667699&#x27;</span>[((x = [<span class="string">&#x27;Bs&#x27;</span>, <span class="string">&#x27;Tab&#x27;</span>, <span class="string">&#x27;Caps&#x27;</span>, <span class="string">&#x27;Enter&#x27;</span>][p++] || <span class="string">&#x27;Shift&#x27;</span>), p)])</span></span></span><br><span class="line"><span class="string"><span class="subst">      ))&#125;</span>\\|`</span>),</span><br><span class="line">      (m += y + (x + <span class="string">&#x27;    &#x27;</span>).slice(<span class="number">0</span>, w) + y + y),</span><br><span class="line">      (n += y + b + y + y),</span><br><span class="line">      (l += <span class="string">&#x27; __&#x27;</span> + b))[<span class="number">73</span>] &amp;&amp; (k.push(l, m, n, o), (l = <span class="string">&#x27;&#x27;</span>), (m = n = o = y)),</span><br><span class="line">    (m = n = o = y = <span class="string">&#x27;|&#x27;</span>),</span><br><span class="line">    (p = l = k = [])</span><br><span class="line">  ) &amp;&amp;</span><br><span class="line">  k.join<span class="string">`</span></span><br><span class="line"><span class="string">`</span>)()</span><br></pre></td></tr></table></figure><blockquote><p>PS：本文整理自 <a target="_blank" rel="noopener" href="https://juejin.im/post/5d4d0ec651882549594e7293">https://juejin.im/post/5d4d0ec651882549594e7293</a> 侵删。</p></blockquote></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.nirongfei.site/blog-hexo/2018/05/15/frontend/180515/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog-hexo/images/avatar.png"><meta itemprop="name" content="阳明先生"><meta itemprop="description" content="知之真切笃实处即是行 行之明觉精察处即是知"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="阳明先生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/blog-hexo/2018/05/15/frontend/180515/" class="post-title-link" itemprop="url">前端开发技巧-CSS Component</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-15 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-15T00:00:00+08:00">2018-05-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-11-18 15:57:04" itemprop="dateModified" datetime="2020-11-18T15:57:04+08:00">2020-11-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog-hexo/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="迭代计数器"><a href="#迭代计数器" class="headerlink" title="迭代计数器"></a>迭代计数器</h2><p>要点：累加选项单位的计数器</p><p>场景：章节目录、选项计数器、加法计数器</p><p>兼容：counters</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/rXqRPo">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c89a88691d5586?imageslim"></p><h2 id="下划线跟随导航栏"><a href="#下划线跟随导航栏" class="headerlink" title="下划线跟随导航栏"></a>下划线跟随导航栏</h2><p>要点：下划线跟随鼠标移动的导航栏</p><p>场景：动态导航栏</p><p>兼容：+</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/eYOJbNv">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/15/16c93317e5c79625?imageslim"></p><h2 id="气泡背景墙"><a href="#气泡背景墙" class="headerlink" title="气泡背景墙"></a>气泡背景墙</h2><p>要点：不间断冒出气泡的背景墙</p><p>场景：动态背景</p><p>兼容：animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/GRKoPdK">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/14/16c8f08d7c4537f9?imageslim"></p><h2 id="滚动指示器"><a href="#滚动指示器" class="headerlink" title="滚动指示器"></a>滚动指示器</h2><p>要点：提示滚动进度的指示器</p><p>场景：阅读进度</p><p>兼容：calc()、gradient</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/ExYPMog">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/16/16c982de5386c867?imageslim"></p><h2 id="故障文本"><a href="#故障文本" class="headerlink" title="故障文本"></a>故障文本</h2><p>要点：显示器故障形式的文本</p><p>场景：错误提示</p><p>兼容：data-*、attr()、animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/xxKZNYv">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/14/16c8ff0d2483e78b?imageslim"></p><h2 id="换色器"><a href="#换色器" class="headerlink" title="换色器"></a>换色器</h2><p>要点：通过拾色器改变图像色相的换色器</p><p>场景：图片色彩变换</p><p>兼容：mix-blend-mode</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/vYBLqBm">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/14/16c9005b2d65d664?imageslim"></p><h2 id="状态悬浮球"><a href="#状态悬浮球" class="headerlink" title="状态悬浮球"></a>状态悬浮球</h2><p>要点：展示当前状态的悬浮球</p><p>场景：状态动态显示、波浪动画</p><p>兼容：gradient、animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/WNewOxa">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/16/16c99a614d1c8162?imageslim"></p><h2 id="粘粘球"><a href="#粘粘球" class="headerlink" title="粘粘球"></a>粘粘球</h2><p>要点：相交粘粘效果的双球回弹运动</p><p>场景：粘粘动画</p><p>兼容：filter、animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/zYOqdBz">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/15/16c950831f391573?imageslim"></p><h2 id="商城票券"><a href="#商城票券" class="headerlink" title="商城票券"></a>商城票券</h2><p>要点：边缘带孔和中间折痕的票劵</p><p>场景：电影票、代金券、消费卡</p><p>兼容：gradient</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/rNBeYza">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/15/16c957cdff15dbb4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p><h2 id="倒影加载条"><a href="#倒影加载条" class="headerlink" title="倒影加载条"></a>倒影加载条</h2><p>要点：带有渐变倒影的加载条</p><p>场景：加载提示</p><p>兼容：box-reflect、animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/GRKZzpg">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/16/16c98734da1bb7c3?imageslim"></p><h2 id="三维立方体"><a href="#三维立方体" class="headerlink" title="三维立方体"></a>三维立方体</h2><p>要点：三维建模的立方体</p><p>场景：三维建模</p><p>兼容：transform、perspective、transform-style、animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/PoYNgXY">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/16/16c996bfeacb738a?imageslim"></p><h2 id="动态边框"><a href="#动态边框" class="headerlink" title="动态边框"></a>动态边框</h2><p>要点：鼠标悬浮时动态渐变显示的边框</p><p>场景：悬浮按钮、边框动画</p><p>兼容：gradient</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/qBWZPvE">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/15/16c9542d0050b2f2?imageslim"></p><h2 id="标签页"><a href="#标签页" class="headerlink" title="标签页"></a>标签页</h2><p>要点：可切换内容的标签页</p><p>场景：内容切换</p><p>兼容：scroll-behavior</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/JjPRjMd">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/19/16ca962153b6659b?imageslim"></p><h2 id="标签导航栏"><a href="#标签导航栏" class="headerlink" title="标签导航栏"></a>标签导航栏</h2><p>要点：可切换内容的导航栏</p><p>场景：页面切换</p><p>兼容：~</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/oNvzoZg">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/20/16cad0d5de3ed7b1?imageslim"></p><h2 id="折叠面板"><a href="#折叠面板" class="headerlink" title="折叠面板"></a>折叠面板</h2><p>要点：可折叠内容的面板</p><p>场景：隐藏式子导航栏</p><p>兼容：~</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/NWKRMjo">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/20/16cae0af22947310?imageslim"></p><h2 id="星级评分"><a href="#星级评分" class="headerlink" title="星级评分"></a>星级评分</h2><p>要点：点击星星进行评分的按钮</p><p>场景：评分</p><p>兼容：~</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/MWgjGMj">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/20/16cae2ac94237169?imageslim"></p><h2 id="加载指示器"><a href="#加载指示器" class="headerlink" title="加载指示器"></a>加载指示器</h2><p>要点：变换…长度的加载提示</p><p>场景：加载提示</p><p>兼容：animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/wvwoRbN">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/22/16cb89cade1cde41?imageslim"></p><h2 id="自适应相册"><a href="#自适应相册" class="headerlink" title="自适应相册"></a>自适应相册</h2><p>要点：自适应照片数量的相册</p><p>场景：九宫格相册、微信相册、图集</p><p>兼容：:only-child、:first-child、:nth-child()、:nth-last-child()、~</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/pozNGyj">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/22/16cb82a19210d4d9?imageslim"></p><h2 id="圆角进度条"><a href="#圆角进度条" class="headerlink" title="圆角进度条"></a>圆角进度条</h2><p>要点：单一颜色的圆角进度条</p><p>场景：进度条</p><p>兼容：gradient</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/jONBxaK">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/26/16ccd52458314882?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p><h2 id="螺纹进度条"><a href="#螺纹进度条" class="headerlink" title="螺纹进度条"></a>螺纹进度条</h2><p>要点：渐变螺纹的进度条</p><p>场景：进度条、加载动画</p><p>兼容：gradient、animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/GRKrJJX">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/22/16cb97dab935f25f?imageslim"></p><h2 id="立体按钮"><a href="#立体按钮" class="headerlink" title="立体按钮"></a>立体按钮</h2><p>要点：点击呈现按下状态的按钮</p><p>场景：按钮点击</p><p>兼容：box-shadow</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/PoYpaLL">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/26/16ccdaeafc8b3608?imageslim"></p><h2 id="混沌加载圈"><a href="#混沌加载圈" class="headerlink" title="混沌加载圈"></a>混沌加载圈</h2><p>要点：带混沌虚影的加载圈</p><p>场景：加载提示</p><p>兼容：filter、animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/aboWbqG">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/27/16cd0ff2f71709f1?imageslim"></p><h2 id="蛇形边框"><a href="#蛇形边框" class="headerlink" title="蛇形边框"></a>蛇形边框</h2><p>要点：蛇形运动的边框</p><p>场景：蛇形动画</p><p>兼容：clip、animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/GRKmgZZ">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/27/16cd19d92519ca0d?imageslim"></p><h2 id="自动打字"><a href="#自动打字" class="headerlink" title="自动打字"></a>自动打字</h2><p>要点：逐个字符自动打印出来的文字</p><p>场景：代码演示、文字输入动画</p><p>兼容：ch、animation</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/ZEzKQEx">在线演示</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/28/16cd6e96cd8fdcf7?imageslim"></p><blockquote><p>PS：本文整理自 <a target="_blank" rel="noopener" href="https://juejin.im/post/5d4d0ec651882549594e7293">https://juejin.im/post/5d4d0ec651882549594e7293</a> 侵删。</p></blockquote></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.nirongfei.site/blog-hexo/2018/05/12/frontend/180512/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog-hexo/images/avatar.png"><meta itemprop="name" content="阳明先生"><meta itemprop="description" content="知之真切笃实处即是行 行之明觉精察处即是知"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="阳明先生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/blog-hexo/2018/05/12/frontend/180512/" class="post-title-link" itemprop="url">前端开发技巧-CSS Figure</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-12 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-12T00:00:00+08:00">2018-05-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-11-18 15:57:04" itemprop="dateModified" datetime="2020-11-18T15:57:04+08:00">2020-11-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog-hexo/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="使用-div-描绘各种图形"><a href="#使用-div-描绘各种图形" class="headerlink" title="使用 div 描绘各种图形"></a>使用 div 描绘各种图形</h2><p>要点：<code>&lt;div&gt;</code> 配合其伪元素(::before、::after)通过 <code>clip</code>、<code>transform</code> 等方式绘制各种图形</p><p>场景：各种图形容器</p><p>兼容：<code>clip</code>、<code>transform</code></p><p>代码：<a target="_blank" rel="noopener" href="https://css-tricks.com/the-shapes-of-css/">在线演示</a></p><h2 id="使用-mask-雕刻镂空背景"><a href="#使用-mask-雕刻镂空背景" class="headerlink" title="使用 mask 雕刻镂空背景"></a>使用 mask 雕刻镂空背景</h2><p>要点：通过 <code>mask</code> 为图像背景生成蒙层提供遮罩效果</p><p>场景：高斯模糊蒙层、票劵(电影票、购物卡)、遮罩动画</p><p>兼容：<code>mask</code>、<code>animation</code>、<code>perspective</code>、<code>transform-style</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/xxKZdZN">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8mask%E9%9B%95%E5%88%BB%E9%95%82%E7%A9%BA%E8%83%8C%E6%99%AF.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$mask-bg</span>: <span class="string">&#x27;https://yangzw.vip/static/codepen/mask-bg.jpg&#x27;</span>;</span><br><span class="line"><span class="variable">$mask-text</span>: <span class="string">&#x27;https://yangzw.vip/static/codepen/mask-text.jpg&#x27;</span>;</span><br><span class="line"><span class="variable">$logo</span>: <span class="string">&#x27;https://yangzw.vip/static/codepen/logo-netease.svg&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bruce</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: -<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background</span>: url(<span class="variable">$mask-bg</span>) no-repeat center/cover;</span><br><span class="line">    <span class="attribute">filter</span>: blur(<span class="number">10px</span>);</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mask-layer</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">9</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background</span>: url(<span class="variable">$mask-text</span>) left center/<span class="number">150%</span> auto;</span><br><span class="line">  <span class="attribute">mask</span>: url(<span class="variable">$logo</span>) center/cover;</span><br><span class="line">  <span class="attribute">animation</span>: move <span class="number">10s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> move &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">background-position</span>-x: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    <span class="attribute">background-position</span>-x: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-filter-描绘头像彩色阴影"><a href="#使用-filter-描绘头像彩色阴影" class="headerlink" title="使用 filter 描绘头像彩色阴影"></a>使用 filter 描绘头像彩色阴影</h2><p>要点：通过 <code>filter: blur() brightness() opacity()</code> 模拟阴影效果</p><p>场景：头像阴影</p><p>兼容：<code>filter</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/GRKjYap">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8filter%E6%8F%8F%E7%BB%98%E5%A4%B4%E5%83%8F%E5%BD%A9%E8%89%B2%E9%98%B4%E5%BD%B1.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$avatar</span>: <span class="string">&#x27;https://yangzw.vip/static/codepen/thor.jpg&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar-shadow</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: url(<span class="variable">$avatar</span>) no-repeat center/cover;</span><br><span class="line">  &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10%</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: inherit;</span><br><span class="line">    <span class="attribute">filter</span>: blur(<span class="number">10px</span>) brightness(<span class="number">80%</span>) opacity(<span class="number">0.8</span>);</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">transform</span>: scale(<span class="number">0.95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-linear-gradient-描绘波浪线"><a href="#使用-linear-gradient-描绘波浪线" class="headerlink" title="使用 linear-gradient 描绘波浪线"></a>使用 linear-gradient 描绘波浪线</h2><p>要点：通过 linear-gradient 绘制波浪线</p><p>场景：文字强化显示、文字下划线、内容分割线</p><p>兼容：gradient</p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/EqEzwq">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8linear-gradient%E6%8F%8F%E7%BB%98%E6%B3%A2%E6%B5%AA%E7%BA%BF.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> waveline(<span class="variable">$h</span>, <span class="variable">$color</span>: <span class="variable">$red</span>) &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="variable">$h</span>;</span><br><span class="line">    <span class="attribute">background</span>: linear-gradient(<span class="number">135deg</span>, transparent, transparent <span class="number">45%</span>, <span class="variable">$color</span>, transparent <span class="number">55%</span>, transparent <span class="number">100%</span>),</span><br><span class="line">      linear-gradient(<span class="number">45deg</span>, transparent, transparent <span class="number">45%</span>, <span class="variable">$color</span>, transparent <span class="number">55%</span>, transparent <span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="variable">$h</span> * <span class="number">2</span> <span class="variable">$h</span> * <span class="number">2</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.waveline-text</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="keyword">@include</span> waveline(<span class="number">10px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-linear-gradient-描绘彩带"><a href="#使用-linear-gradient-描绘彩带" class="headerlink" title="使用 linear-gradient 描绘彩带"></a>使用 linear-gradient 描绘彩带</h2><p>要点：通过 <code>repeating-linear-gradient</code> 绘制间断颜色的彩带</p><p>场景：主题化</p><p>兼容：<code>gradient</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/bGbeXZG">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8linear-gradient%E6%8F%8F%E7%BB%98%E5%BD%A9%E5%B8%A6.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.colour-bar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: repeating-linear-gradient(<span class="number">90deg</span>, <span class="variable">$red</span>, <span class="variable">$red</span> <span class="number">50px</span>, <span class="variable">$purple</span> <span class="number">50px</span>, <span class="variable">$purple</span> <span class="number">100px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-conic-gradient-描绘饼图"><a href="#使用-conic-gradient-描绘饼图" class="headerlink" title="使用 conic-gradient 描绘饼图"></a>使用 conic-gradient 描绘饼图</h2><p>要点：通过 <code>conic-gradient</code> 绘制多种色彩的饼图</p><p>场景：项占比饼图</p><p>兼容：<code>gradient</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/XWrjrgE">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8conic-gradient%E6%8F%8F%E7%BB%98%E9%A5%BC%E5%9B%BE.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.pie-chart</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: conic-gradient(<span class="variable">$red</span> <span class="number">0</span> <span class="number">25%</span>, <span class="variable">$purple</span> <span class="number">25%</span> <span class="number">30%</span>, <span class="variable">$orange</span> <span class="number">30%</span> <span class="number">55%</span>, <span class="variable">$blue</span> <span class="number">55%</span> <span class="number">70%</span>, <span class="variable">$green</span> <span class="number">70%</span> <span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-linear-gradient-描绘方格背景"><a href="#使用-linear-gradient-描绘方格背景" class="headerlink" title="使用 linear-gradient 描绘方格背景"></a>使用 linear-gradient 描绘方格背景</h2><p>要点：使用 <code>linear-gradient</code> 绘制间断颜色的彩带进行交互生成方格</p><p>场景：格子背景、占位图</p><p>兼容：<code>gradient</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/RwboXoV">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8linear-gradient%E6%8F%8F%E7%BB%98%E6%96%B9%E6%A0%BC%E8%83%8C%E6%99%AF.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.square-bg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: linear-gradient(<span class="number">45deg</span>, <span class="number">#eee</span> <span class="number">25%</span>, transparent <span class="number">25%</span>, transparent <span class="number">75%</span>, <span class="number">#eee</span> <span class="number">75%</span>), linear-gradient(<span class="number">45deg</span>, <span class="number">#eee</span></span><br><span class="line">        <span class="number">25%</span>, transparent <span class="number">25%</span>, transparent <span class="number">75%</span>, <span class="number">#eee</span> <span class="number">75%</span>);</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>, <span class="number">20px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">40px</span> <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-box-shadow-描绘单侧投影"><a href="#使用-box-shadow-描绘单侧投影" class="headerlink" title="使用 box-shadow 描绘单侧投影"></a>使用 box-shadow 描绘单侧投影</h2><p>要点：通过 <code>box-shadow</code> 生成投影，且模糊半径和负的扩张半径一致，使投影偏向一侧</p><p>场景：容器投影、背景补间动画、立体投影、文字立体投影、文字渐变立体投影、长投影、霓虹灯、灯光阴影</p><p>兼容：<code>box-shadow</code>、<code>filter</code>、<code>text-shadow</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/BaBLqYo">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8box-shadow%E6%8F%8F%E7%BB%98%E5%8D%95%E4%BE%A7%E6%8A%95%E5%BD%B1.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.aside-shadow</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: -<span class="number">7px</span> <span class="number">0</span> <span class="number">5px</span> -<span class="number">5px</span> <span class="variable">$orange</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">$orange</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-box-shadow-裁剪图像"><a href="#使用-box-shadow-裁剪图像" class="headerlink" title="使用 box-shadow 裁剪图像"></a>使用 box-shadow 裁剪图像</h2><p>要点：通过 <code>box-shadow</code> 模拟蒙层实现中间镂空</p><p>场景：图片裁剪、新手引导、背景镂空、投射定位</p><p>兼容：<code>box-shadow</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/zYONxRG">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8box-shadow%E8%A3%81%E5%89%AA%E5%9B%BE%E5%83%8F.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img-cliper</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">9999px</span> rgba(<span class="number">#000</span>, <span class="number">0.5</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.mask</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-outline-描绘内边框"><a href="#使用-outline-描绘内边框" class="headerlink" title="使用 outline 描绘内边框"></a>使用 outline 描绘内边框</h2><p>要点：通过 <code>outline</code> 设置轮廓进行描边，可设置 <code>outline-offset</code> 设置内描边</p><p>场景：内描边、外描边</p><p>兼容：<code>outline</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/pozeVyL">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8outline%E6%8F%8F%E7%BB%98%E5%86%85%E8%BE%B9%E6%A1%86.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outside-border</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">10px</span> dashed <span class="variable">$blue</span>;</span><br><span class="line">  <span class="attribute">outline-offset</span>: -<span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> dashed <span class="variable">$orange</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="variable">$green</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>PS：本文整理自 <a target="_blank" rel="noopener" href="https://juejin.im/post/5d4d0ec651882549594e7293">https://juejin.im/post/5d4d0ec651882549594e7293</a> 侵删。</p></blockquote></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.nirongfei.site/blog-hexo/2018/05/09/frontend/180509/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog-hexo/images/avatar.png"><meta itemprop="name" content="阳明先生"><meta itemprop="description" content="知之真切笃实处即是行 行之明觉精察处即是知"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="阳明先生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/blog-hexo/2018/05/09/frontend/180509/" class="post-title-link" itemprop="url">前端开发技巧-CSS Color</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-09 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-09T00:00:00+08:00">2018-05-09</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-11-18 15:57:04" itemprop="dateModified" datetime="2020-11-18T15:57:04+08:00">2020-11-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog-hexo/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="使用-color-改变边框颜色"><a href="#使用-color-改变边框颜色" class="headerlink" title="使用 color 改变边框颜色"></a>使用 color 改变边框颜色</h2><p>要点：<code>border</code> 没有定义 <code>border-color</code> 时，设置 <code>color</code> 后，<code>border-color</code> 会被定义成 <code>color</code></p><p>场景：边框颜色与文字颜色相同</p><p>兼容：<code>color</code></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8color%E6%94%B9%E5%8F%98%E8%BE%B9%E6%A1%86%E9%A2%9C%E8%89%B2.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.elem</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f66</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-filter-开启悼念模式"><a href="#使用-filter-开启悼念模式" class="headerlink" title="使用 filter 开启悼念模式"></a>使用 filter 开启悼念模式</h2><p>要点：通过 <code>filter: grayscale()</code> 设置灰度来开启悼念模式</p><p>场景：网站悼念</p><p>兼容：<code>filter</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/vYBKqwe">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8filter%E5%BC%80%E5%90%AF%E6%82%BC%E5%BF%B5%E6%A8%A1%E5%BC%8F.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">filter</span>: grayscale(<span class="number">100%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mourning-mode</span> &#123;</span><br><span class="line">  <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-filter-模拟-Instagram-滤镜"><a href="#使用-filter-模拟-Instagram-滤镜" class="headerlink" title="使用 filter 模拟 Instagram 滤镜"></a>使用 filter 模拟 Instagram 滤镜</h2><p>要点：通过 <code>filter</code> 的滤镜组合起来模拟 Instagram 滤镜</p><p>场景：图片滤镜</p><p>兼容：<code>filter</code>、<code>css-gram</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/NWKbVNQ">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8filter%E6%A8%A1%E6%8B%9FInstagram%E6%BB%A4%E9%95%9C.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.instagram-filter</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">align-content</span>: space-between;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1635px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">630px</span>;</span><br><span class="line">  <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">225px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: fit-content;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">filter</span>: none;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.obscure</span> &#123;</span><br><span class="line">  <span class="attribute">filter</span>: brightness(<span class="number">80%</span>) grayscale(<span class="number">20%</span>) contrast(<span class="number">1.2</span>) opacity(<span class="number">0.6</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-selection-改变文本选择颜色"><a href="#使用-selection-改变文本选择颜色" class="headerlink" title="使用::selection 改变文本选择颜色"></a>使用::selection 改变文本选择颜色</h2><p>要点：通过 <code>::selection</code> 根据主题颜色自定义文本选择颜色</p><p>场景：主题化</p><p>兼容：<code>::selection</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/jONrjXX">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8selection%E6%94%B9%E5%8F%98%E6%96%87%E6%9C%AC%E9%80%89%E6%8B%A9%E9%A2%9C%E8%89%B2.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="variable">$purple</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.select-color</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">$red</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.special</span><span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="variable">$green</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-linear-gradient-控制背景渐变"><a href="#使用-linear-gradient-控制背景渐变" class="headerlink" title="使用 linear-gradient 控制背景渐变"></a>使用 linear-gradient 控制背景渐变</h2><p>要点：通过 <code>linear-gradient</code> 设置背景渐变色并放大背景尺寸，添加背景移动效果</p><p>场景：主题化、彩虹背景墙</p><p>兼容：<code>gradient</code>、<code>animation</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/oNvbRwN">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8linear-gradient%E6%8E%A7%E5%88%B6%E8%83%8C%E6%99%AF%E6%B8%90%E5%8F%98.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gradient-bg</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: linear-gradient(<span class="number">135deg</span>, <span class="variable">$red</span>, <span class="variable">$orange</span>, <span class="variable">$green</span>, <span class="variable">$blue</span>, <span class="variable">$purple</span>) left center/<span class="number">400%</span> <span class="number">400%</span>; <span class="comment">// 左上到右下</span></span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">animation</span>: move <span class="number">10s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> move &#123;</span><br><span class="line">  0%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">background-position</span>-x: left;</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    <span class="attribute">background-position</span>-x: right;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-linear-gradient-控制文本渐变"><a href="#使用-linear-gradient-控制文本渐变" class="headerlink" title="使用 linear-gradient 控制文本渐变"></a>使用 linear-gradient 控制文本渐变</h2><p>要点：通过 <code>linear-gradient</code> 设置背景渐变色，配合 <code>background-clip: text</code> 对背景进行文本裁剪，添加滤镜动画</p><p>场景：主题化、特色标题</p><p>兼容：<code>filter</code>、<code>gradient</code>、<code>animation</code>、<code>background-clip</code>、<code>text-fill-color</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/pozgQVo">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8linear-gradient%E6%8E%A7%E5%88%B6%E6%96%87%E6%9C%AC%E6%B8%90%E5%8F%98.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gradient-text</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: linear-gradient(<span class="number">90deg</span>, <span class="variable">$red</span>, <span class="variable">$orange</span>); <span class="comment">// 左到右</span></span><br><span class="line">  <span class="attribute">background-clip</span>: text;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">animation</span>: hue <span class="number">5s</span> linear infinite;</span><br><span class="line">  -webkit-text-fill-<span class="attribute">color</span>: transparent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 色相旋转</span></span><br><span class="line"><span class="keyword">@keyframes</span> hue &#123;</span><br><span class="line">  from &#123;</span><br><span class="line">    <span class="attribute">filter</span>: hue-rotate(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    <span class="attribute">filter</span>: hue-rotate(-<span class="number">1turn</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-caret-color-改变光标颜色"><a href="#使用-caret-color-改变光标颜色" class="headerlink" title="使用 caret-color 改变光标颜色"></a>使用 caret-color 改变光标颜色</h2><p>要点：通过 <code>caret-color</code> 根据主题颜色自定义光标颜色</p><p>场景：主题化</p><p>兼容：<code>caret-color</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/QemxKr">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8caret-color%E6%94%B9%E5%8F%98%E5%85%89%E6%A0%87%E9%A2%9C%E8%89%B2.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.form-validation</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">    &amp;<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">      <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">label</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">input</span>,</span><br><span class="line">  <span class="selector-tag">textarea</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    caret-<span class="attribute">color</span>: <span class="variable">$blue</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">300ms</span>;</span><br><span class="line">    &amp;<span class="selector-pseudo">:valid</span> &#123;</span><br><span class="line">      <span class="attribute">border-color</span>: <span class="variable">$green</span>;</span><br><span class="line">      <span class="attribute">box-shadow</span>: inset <span class="number">5px</span> <span class="number">0</span> <span class="number">0</span> <span class="variable">$green</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-pseudo">:invalid</span> &#123;</span><br><span class="line">      <span class="attribute">border-color</span>: <span class="variable">$red</span>;</span><br><span class="line">      <span class="attribute">box-shadow</span>: inset <span class="number">5px</span> <span class="number">0</span> <span class="number">0</span> <span class="variable">$red</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">textarea</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">122px</span>;</span><br><span class="line">    <span class="attribute">resize</span>: none;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-scrollbar-改变滚动条样式"><a href="#使用-scrollbar-改变滚动条样式" class="headerlink" title="使用:scrollbar 改变滚动条样式"></a>使用:scrollbar 改变滚动条样式</h2><p>要点：通过 <code>scrollbar</code> 的 <code>scrollbar-track</code> 和 <code>scrollbar-thumb</code> 等属性来自定义滚动条样式</p><p>场景：主题化、页面滚动</p><p>兼容：<code>:scrollbar</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/ExYPMog">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8scrollbar%E6%94%B9%E5%8F%98%E6%BB%9A%E5%8A%A8%E6%9D%A1%E6%A0%B7%E5%BC%8F.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.scroll-indicator</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$purple</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.article</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  &amp;::-webkit-scrollbar &#123;</span><br><span class="line">    width: <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;::-webkit-scrollbar-track &#123;</span><br><span class="line">    background-color: <span class="number">#f0f0f0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    border-radius: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="variable">$purple</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">article</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background</span>: linear-gradient(to right top, <span class="variable">$red</span> <span class="number">50%</span>, <span class="number">#f0f0f0</span> <span class="number">50%</span>) no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> calc(<span class="number">100%</span> - <span class="number">298px</span> + <span class="number">5px</span>);</span><br><span class="line">    &gt; * &#123;</span><br><span class="line">      <span class="attribute">position</span>: relative;</span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">9</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">2em</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>PS：本文整理自 <a target="_blank" rel="noopener" href="https://juejin.im/post/5d4d0ec651882549594e7293">https://juejin.im/post/5d4d0ec651882549594e7293</a> 侵删。</p></blockquote></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.nirongfei.site/blog-hexo/2018/05/06/frontend/180506/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog-hexo/images/avatar.png"><meta itemprop="name" content="阳明先生"><meta itemprop="description" content="知之真切笃实处即是行 行之明觉精察处即是知"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="阳明先生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/blog-hexo/2018/05/06/frontend/180506/" class="post-title-link" itemprop="url">前端开发技巧-CSS Behavior</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-06 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-06T00:00:00+08:00">2018-05-06</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-11-18 15:57:04" itemprop="dateModified" datetime="2020-11-18T15:57:04+08:00">2020-11-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog-hexo/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>9.5k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>9 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="使用-overflow-scrolling-支持弹性滚动"><a href="#使用-overflow-scrolling-支持弹性滚动" class="headerlink" title="使用 overflow-scrolling 支持弹性滚动"></a>使用 overflow-scrolling 支持弹性滚动</h2><p>要点：iOS 页面非 <code>body</code> 元素的滚动操作会非常卡(Android 不会出现此情况)，通过 <code>overflow-scrolling: touch</code> 调用 Safari 原生滚动来支持弹性滚动，增加页面滚动的流畅度</p><p>场景：iOS 页面滚动</p><p>兼容：iOS 自带 <code>-webkit-overflow-scrolling</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">overflow</span>-scrolling: touch;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.elem</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-transform-启动-GPU-硬件加速"><a href="#使用-transform-启动-GPU-硬件加速" class="headerlink" title="使用 transform 启动 GPU 硬件加速"></a>使用 transform 启动 GPU 硬件加速</h2><p>要点：有时执行动画可能会导致页面卡顿，可在特定元素中使用硬件加速来避免这个问题</p><p>场景：动画元素(绝对定位、同级中超过 6 个以上使用动画)</p><p>兼容：<code>transform</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.elem</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: translate3d(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">/* translateZ(0)亦可 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-attr-抓取-data"><a href="#使用-attr-抓取-data" class="headerlink" title="使用 attr()抓取 data-*"></a>使用 attr()抓取 data-*</h2><p>要点：在标签上自定义属性 <code>data-*</code>，通过 <code>attr()</code> 获取其内容赋值到 <code>content</code> 上</p><p>场景：提示框</p><p>兼容：<code>data-*</code>、<code>attr()</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/voRdKX">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8attr%E6%8A%93%E5%8F%96data-.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tips</span> &#123;</span><br><span class="line">	<span class="attribute">position</span>: relative;</span><br><span class="line">	<span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">	<span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="variable">$purple</span>;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">	&amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">		<span class="attribute">position</span>: absolute;</span><br><span class="line">		<span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">background-color</span>: rgba(<span class="number">#000</span>, .<span class="number">5</span>);</span><br><span class="line">		<span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">text-align</span>: center;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">		<span class="attribute">content</span>: attr(data-msg);</span><br><span class="line">		<span class="attribute">transition</span>: all <span class="number">300ms</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	&amp;<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">		<span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	&amp;<span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">		<span class="attribute">left</span>: calc(<span class="number">100%</span> + <span class="number">20px</span>);</span><br><span class="line">		<span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	&amp;<span class="selector-attr">[href]</span><span class="selector-pseudo">:empty</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">		<span class="attribute">content</span>: attr(href);</span><br><span class="line">	&#125;</span><br><span class="line">	&amp;<span class="selector-attr">[href]</span><span class="selector-pseudo">:empty</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: none;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-valid-和-invalid-校验表单"><a href="#使用-valid-和-invalid-校验表单" class="headerlink" title="使用:valid 和:invalid 校验表单"></a>使用:valid 和:invalid 校验表单</h2><p>要点：<code>&lt;input&gt;</code>使用伪类 <code>:valid</code> 和 <code>:invalid</code> 配合 <code>pattern</code> 校验表单输入的内容</p><p>场景：表单校验</p><p>兼容：<code>pattern</code>、<code>:valid</code>、<code>:invalid</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/QemxKr">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8valid%E5%92%8Cinvalid%E6%A0%A1%E9%AA%8C%E8%A1%A8%E5%8D%95.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.form-validation</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">	<span class="selector-tag">div</span> &#123;</span><br><span class="line">		<span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">			<span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">label</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: block;</span><br><span class="line">		<span class="attribute">padding-bottom</span>: <span class="number">5px</span>;</span><br><span class="line">		<span class="attribute">font-weight</span>: bold;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">input</span>,</span><br><span class="line">	<span class="selector-tag">textarea</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: block;</span><br><span class="line">		<span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">		<span class="attribute">outline</span>: none;</span><br><span class="line">		<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">		caret-<span class="attribute">color</span>: <span class="variable">$blue</span>;</span><br><span class="line">		<span class="attribute">transition</span>: all <span class="number">300ms</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:valid</span> &#123;</span><br><span class="line">			<span class="attribute">border-color</span>: <span class="variable">$green</span>;</span><br><span class="line">			<span class="attribute">box-shadow</span>: inset <span class="number">5px</span> <span class="number">0</span> <span class="number">0</span> <span class="variable">$green</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:invalid</span> &#123;</span><br><span class="line">			<span class="attribute">border-color</span>: <span class="variable">$red</span>;</span><br><span class="line">			<span class="attribute">box-shadow</span>: inset <span class="number">5px</span> <span class="number">0</span> <span class="number">0</span> <span class="variable">$red</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">textarea</span> &#123;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">122px</span>;</span><br><span class="line">		<span class="attribute">resize</span>: none;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-pointer-events-禁用事件触发"><a href="#使用-pointer-events-禁用事件触发" class="headerlink" title="使用 pointer-events 禁用事件触发"></a>使用 pointer-events 禁用事件触发</h2><p>要点：通过 <code>pointer-events:none</code> 禁用事件触发(默认事件、冒泡事件、鼠标事件、键盘事件等)，相当于<code>&lt;button&gt;</code>的 <code>disabled</code></p><p>场景：限时点击按钮(发送验证码倒计时)、事件冒泡禁用(多个元素重叠且自带事件、a 标签跳转)</p><p>兼容：<code>pointer-events</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/dxmrLj">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8pointer-events%E7%A6%81%E7%94%A8%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.disabled-trigger</span> &#123;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">	<span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="variable">$purple</span>;</span><br><span class="line">	<span class="attribute">pointer-events</span>: none;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-或-美化选项框"><a href="#使用-或-美化选项框" class="headerlink" title="使用+或~美化选项框"></a>使用+或~美化选项框</h2><p>要点：<code>&lt;label&gt;</code>使用 <code>+</code> 或 <code>~</code> 配合 <code>for</code> 绑定 <code>radio</code> 或 <code>checkbox</code> 的选择行为</p><p>场景：选项框美化、选中项增加选中样式</p><p>兼容：<code>+、~</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/rXdbgZ">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8+%E6%88%96~%E7%BE%8E%E5%8C%96%E9%80%89%E9%A1%B9%E6%A1%86.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.beauty-selection</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: flex;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: flex;</span><br><span class="line">		<span class="attribute">align-items</span>: center;</span><br><span class="line">		<span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">			<span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">label</span> &#123;</span><br><span class="line">		<span class="attribute">background-color</span>: <span class="variable">$orange</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">label</span> &#123;</span><br><span class="line">		<span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">		<span class="attribute">padding</span>: <span class="number">2px</span>;</span><br><span class="line">		<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$orange</span>;</span><br><span class="line">		<span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">		<span class="attribute">background-clip</span>: content-box;</span><br><span class="line">		<span class="attribute">cursor</span>: pointer;</span><br><span class="line">		<span class="attribute">transition</span>: all <span class="number">300ms</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">			<span class="attribute">border-color</span>: <span class="variable">$blue</span>;</span><br><span class="line">			<span class="attribute">background-color</span>: <span class="variable">$blue</span>;</span><br><span class="line">			<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">7px</span> <span class="variable">$blue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">span</span> &#123;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-focus-within-分发冒泡响应"><a href="#使用-focus-within-分发冒泡响应" class="headerlink" title="使用:focus-within 分发冒泡响应"></a>使用:focus-within 分发冒泡响应</h2><p>要点：表单控件触发 <code>focus</code> 和 <code>blur</code> 事件后往父元素进行冒泡，在父元素上通过 <code>:focus-within</code> 捕获该冒泡事件来设置样式</p><p>场景：登录注册弹框、表单校验、离屏导航、导航切换</p><p>兼容：<code>:focus-within</code>、<code>:placeholder-shown</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/BaBjaBP">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8focus-within%E5%88%86%E5%8F%91%E5%86%92%E6%B3%A1%E5%93%8D%E5%BA%94.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bruce</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bubble-distribution</span> &#123;</span><br><span class="line">	<span class="attribute">position</span>: relative;</span><br><span class="line">	<span class="attribute">margin-top</span>: <span class="number">50px</span>;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">	<span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">320px</span>;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">	<span class="selector-tag">h3</span> &#123;</span><br><span class="line">		<span class="attribute">font-weight</span>: bold;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">		<span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">div</span> &#123;</span><br><span class="line">		<span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">img</span> &#123;</span><br><span class="line">		<span class="attribute">position</span>: absolute;</span><br><span class="line">		<span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">		<span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> -<span class="number">20px</span> -<span class="number">60px</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">ul</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: flex;</span><br><span class="line">		<span class="attribute">justify-content</span>: space-between;</span><br><span class="line">		<span class="attribute">align-items</span>: center;</span><br><span class="line">		<span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">position</span>: relative;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">45%</span>;</span><br><span class="line">		<span class="attribute">transition</span>: all <span class="number">300ms</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:focus</span>-within &#123;</span><br><span class="line">			<span class="attribute">background</span>: linear-gradient(<span class="number">90deg</span>, <span class="variable">$blue</span> <span class="number">50%</span>, transparent <span class="number">0</span>) repeat-x,</span><br><span class="line">				linear-gradient(<span class="number">90deg</span>, <span class="variable">$blue</span> <span class="number">50%</span>, transparent <span class="number">0</span>) repeat-x,</span><br><span class="line">				linear-gradient(<span class="number">0deg</span>, <span class="variable">$blue</span> <span class="number">50%</span>, transparent <span class="number">0</span>) repeat-y,</span><br><span class="line">				linear-gradient(<span class="number">0deg</span>, <span class="variable">$blue</span> <span class="number">50%</span>, transparent <span class="number">0</span>) repeat-y;</span><br><span class="line">			<span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>, <span class="number">0</span> <span class="number">100%</span>, <span class="number">0</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">0</span>;</span><br><span class="line">			<span class="attribute">background-size</span>: <span class="number">8px</span> <span class="number">1px</span>, <span class="number">8px</span> <span class="number">1px</span>, <span class="number">1px</span> <span class="number">8px</span>, <span class="number">1px</span> <span class="number">8px</span>;</span><br><span class="line">			<span class="attribute">animation</span>: move <span class="number">500ms</span> infinite linear;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">input</span><span class="selector-attr">[type=text]</span>,</span><br><span class="line">	<span class="selector-tag">input</span><span class="selector-attr">[type=password]</span> &#123;</span><br><span class="line">		<span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">		<span class="attribute">outline</span>: none;</span><br><span class="line">		<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e9e9e9</span>;</span><br><span class="line">		<span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">transition</span>: all <span class="number">300ms</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:focus</span><span class="selector-pseudo">:valid</span> &#123;</span><br><span class="line">			<span class="attribute">border-color</span>: <span class="variable">$blue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:focus</span><span class="selector-pseudo">:invalid</span> &#123;</span><br><span class="line">			<span class="attribute">border-color</span>: <span class="variable">$red</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">input</span><span class="selector-attr">[type=radio]</span> &#123;</span><br><span class="line">		<span class="attribute">position</span>: absolute;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:checked</span> + <span class="selector-tag">label</span> &#123;</span><br><span class="line">			<span class="attribute">border</span>: <span class="number">3px</span> solid transparent;</span><br><span class="line">			<span class="attribute">background-color</span>: <span class="variable">$blue</span>;</span><br><span class="line">			<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">label</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: block;</span><br><span class="line">		<span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">background-clip</span>: padding-box;</span><br><span class="line">		<span class="attribute">cursor</span>: pointer;</span><br><span class="line">		<span class="attribute">text-align</span>: center;</span><br><span class="line">		<span class="attribute">transition</span>: all <span class="number">300ms</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">button</span> &#123;</span><br><span class="line">		<span class="attribute">overflow</span>: hidden;</span><br><span class="line">		<span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">		<span class="attribute">outline</span>: none;</span><br><span class="line">		<span class="attribute">border</span>: none;</span><br><span class="line">		<span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">background-color</span>: <span class="variable">$blue</span>;</span><br><span class="line">		<span class="attribute">cursor</span>: pointer;</span><br><span class="line">		<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">		<span class="attribute">transition</span>: all <span class="number">300ms</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.accout</span>,</span><br><span class="line"><span class="selector-class">.password</span>,</span><br><span class="line"><span class="selector-class">.code</span> &#123;</span><br><span class="line">	<span class="selector-tag">img</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: none;</span><br><span class="line">		<span class="attribute">margin-bottom</span>: -<span class="number">27px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	&amp;<span class="selector-pseudo">:focus</span>-within &#123;</span><br><span class="line">		<span class="selector-tag">img</span> &#123;</span><br><span class="line">			<span class="attribute">display</span>: block;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp; ~ <span class="selector-tag">img</span> &#123;</span><br><span class="line">			<span class="attribute">display</span>: none;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.code</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: flex;</span><br><span class="line">	<span class="attribute">justify-content</span>: space-between;</span><br><span class="line">	<span class="selector-tag">button</span> &#123;</span><br><span class="line">		<span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">input</span> &#123;</span><br><span class="line">		&amp;<span class="selector-pseudo">:not</span>(:placeholder-shown) &#123;</span><br><span class="line">			width: <span class="number">70%</span>;</span><br><span class="line">			&amp; + <span class="selector-tag">button</span> &#123;</span><br><span class="line">				<span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;:placeholder-shown &#123;</span><br><span class="line">			width: <span class="number">100%</span>;</span><br><span class="line">			&amp; + <span class="selector-tag">button</span> &#123;</span><br><span class="line">				<span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">				<span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> move &#123;</span><br><span class="line">	to &#123;</span><br><span class="line">		<span class="attribute">background-position</span>: <span class="number">6%</span> <span class="number">0</span>, -<span class="number">6%</span> <span class="number">100%</span>, <span class="number">0</span> -<span class="number">6%</span>, <span class="number">100%</span> <span class="number">6%</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-hover-描绘鼠标跟随"><a href="#使用-hover-描绘鼠标跟随" class="headerlink" title="使用:hover 描绘鼠标跟随"></a>使用:hover 描绘鼠标跟随</h2><p>要点：将整个页面等比划分成小的单元格，每个单元格监听 <code>:hover</code>，通过 <code>:hover</code> 触发单元格的样式变化来描绘鼠标运动轨迹</p><p>场景：鼠标跟随轨迹、水波纹、怪圈</p><p>兼容：<code>:hover</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/wvwMLJY">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8hover%E6%8F%8F%E7%BB%98%E9%BC%A0%E6%A0%87%E8%B7%9F%E9%9A%8F.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@function</span> randomNum(<span class="variable">$max</span>, <span class="variable">$min</span>: <span class="number">0</span>, <span class="variable">$u</span>: <span class="number">1</span>) &#123;</span><br><span class="line">	<span class="keyword">@return</span> (<span class="variable">$min</span> + random(<span class="variable">$max</span>)) * <span class="variable">$u</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.mouse-following</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: flex;</span><br><span class="line">	<span class="attribute">overflow</span>: hidden;</span><br><span class="line">	<span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">	<span class="attribute">cursor</span>: pointer;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">position</span>: relative;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">			<span class="attribute">position</span>: absolute;</span><br><span class="line">			<span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">			<span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">			<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">			<span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">			<span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">			<span class="attribute">background-color</span>: transparent;</span><br><span class="line">			<span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="attribute">transform</span>: scale3d(.<span class="number">1</span>, .<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">			<span class="attribute">transition</span>: all <span class="number">500ms</span> ease-in;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">			&amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">				<span class="attribute">transform</span>: scale3d(<span class="number">1.8</span>, <span class="number">1.8</span>, <span class="number">1.8</span>);</span><br><span class="line">				<span class="attribute">transition</span>: transform <span class="number">0s</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">@for</span> <span class="variable">$i</span> from <span class="number">1</span> through <span class="number">500</span> &#123;</span><br><span class="line">			&amp;<span class="selector-pseudo">:nth-child</span>(#&#123;<span class="variable">$i</span>&#125;)<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">				&amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">					<span class="attribute">background-color</span>: rgba(randomNum(<span class="number">255</span>), randomNum(<span class="number">255</span>), randomNum(<span class="number">255</span>), .<span class="number">8</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-max-height-切换自动高度"><a href="#使用-max-height-切换自动高度" class="headerlink" title="使用 max-height 切换自动高度"></a>使用 max-height 切换自动高度</h2><p>要点：通过 <code>max-height</code> 定义收起的最小高度和展开的最大高度，设置两者间的过渡切换</p><p>场景：隐藏式子导航栏、悬浮式折叠面板</p><p>兼容：<code>max-height</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/NQYJpm">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8max-height%E5%88%87%E6%8D%A2%E8%87%AA%E5%8A%A8%E9%AB%98%E5%BA%A6.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.auto-height</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">		<span class="attribute">cursor</span>: pointer;</span><br><span class="line">		&amp;<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">			<span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:hover</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">			<span class="attribute">border-bottom-width</span>: <span class="number">1px</span>;</span><br><span class="line">			<span class="attribute">max-height</span>: <span class="number">600px</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">h3</span> &#123;</span><br><span class="line">		<span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">background-color</span>: <span class="variable">$red</span>;</span><br><span class="line">		<span class="attribute">cursor</span>: pointer;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">		<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">p</span> &#123;</span><br><span class="line">		<span class="attribute">overflow</span>: hidden;</span><br><span class="line">		<span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">		<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$red</span>;</span><br><span class="line">		<span class="attribute">border-top</span>: none;</span><br><span class="line">		<span class="attribute">border-bottom-width</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">max-height</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">		<span class="attribute">transition</span>: all <span class="number">500ms</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-transform-模拟视差滚动"><a href="#使用-transform-模拟视差滚动" class="headerlink" title="使用 transform 模拟视差滚动"></a>使用 transform 模拟视差滚动</h2><p>要点：通过 <code>background-attachment: fixed</code> 或 <code>transform</code> 让多层背景以不同的速度移动，形成立体的运动效果</p><p>场景：页面滚动、视差滚动文字阴影、视差滚动文字虚影</p><p>兼容：<code>background-attachment</code>、<code>transform</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/MWgaBoK">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8transform%E6%A8%A1%E6%8B%9F%E8%A7%86%E5%B7%AE%E6%BB%9A%E5%8A%A8.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$bg</span>: <span class="string">&quot;https://yangzw.vip/static/codepen/bg.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bruce</span> &#123;</span><br><span class="line">	<span class="attribute">overflow</span>: auto;</span><br><span class="line">	<span class="attribute">perspective</span>: <span class="number">1px</span>;</span><br><span class="line">	<span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">	<span class="selector-tag">p</span> &#123;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">300px</span>;</span><br><span class="line">		<span class="attribute">text-align</span>: center;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">		<span class="attribute">color</span>: <span class="variable">$red</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax-scrolling</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: flex;</span><br><span class="line">	<span class="attribute">justify-content</span>: center;</span><br><span class="line">	<span class="attribute">align-items</span>: center;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">1000px</span>;</span><br><span class="line">	<span class="attribute">background</span>: url(<span class="variable">$bg</span>) no-repeat center fixed;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">		<span class="attribute">text-align</span>: center;</span><br><span class="line">		<span class="attribute">font-weight</span>: bold;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">60px</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:nth-child</span>(1) &#123;</span><br><span class="line">			<span class="attribute">color</span>: <span class="variable">$red</span>;</span><br><span class="line">			<span class="attribute">transform</span>: translateZ(-<span class="number">1px</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:nth-child</span>(2) &#123;</span><br><span class="line">			<span class="attribute">color</span>: <span class="variable">$blue</span>;</span><br><span class="line">			<span class="attribute">transform</span>: translateZ(-<span class="number">2px</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:nth-child</span>(3) &#123;</span><br><span class="line">			<span class="attribute">color</span>: <span class="variable">$green</span>;</span><br><span class="line">			<span class="attribute">transform</span>: translateZ(-<span class="number">3px</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-animation-delay-保留动画起始帧"><a href="#使用-animation-delay-保留动画起始帧" class="headerlink" title="使用 animation-delay 保留动画起始帧"></a>使用 animation-delay 保留动画起始帧</h2><p>要点：通过 <code>transform-delay</code> 或 <code>animation-delay</code> 设置负值时延保留动画起始帧，让动画进入页面不用等待即可运行</p><p>场景：开场动画</p><p>兼容：<code>transform</code>、<code>animation</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/WNexVoB">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8animation-delay%E4%BF%9D%E7%95%99%E5%8A%A8%E7%94%BB%E8%B5%B7%E5%A7%8B%E5%B8%A7.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.initial-keyframe</span> &#123;</span><br><span class="line">	<span class="attribute">position</span>: relative;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">position</span>: absolute;</span><br><span class="line">		<span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">background-color</span>: <span class="variable">$green</span>;</span><br><span class="line">		<span class="attribute">transform</span>: rotate(<span class="number">0</span>) translate(-<span class="number">80px</span>, <span class="number">0</span>);</span><br><span class="line">		<span class="attribute">animation</span>: rotate <span class="number">3s</span> linear infinite;</span><br><span class="line">		&amp;<span class="selector-pseudo">:nth-child</span>(2) &#123;</span><br><span class="line">			<span class="attribute">animation-delay</span>: -<span class="number">1s</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:nth-child</span>(3) &#123;</span><br><span class="line">			<span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> rotate &#123;</span><br><span class="line">	to &#123;</span><br><span class="line">		<span class="attribute">transform</span>: rotate(<span class="number">1turn</span>) translate(-<span class="number">80px</span>, <span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-resize-拉伸分栏"><a href="#使用-resize-拉伸分栏" class="headerlink" title="使用 resize 拉伸分栏"></a>使用 resize 拉伸分栏</h2><p>要点：通过 <code>resize</code> 设置横向自由拉伸来调整目标元素的宽度</p><p>场景：富文本编辑器、分栏阅读</p><p>兼容：<code>resize</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/JjPEdWO">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8resize%E6%8B%89%E4%BC%B8%E5%88%86%E6%A0%8F.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.stretching-column</span> &#123;</span><br><span class="line">	<span class="attribute">overflow</span>: hidden;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$blue</span>;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="variable">$orange</span>;</span><br><span class="line">	<span class="selector-class">.left</span> &#123;</span><br><span class="line">		<span class="attribute">overflow</span>: hidden;</span><br><span class="line">		<span class="attribute">float</span>: left;</span><br><span class="line">		<span class="attribute">position</span>: relative;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-class">.right</span> &#123;</span><br><span class="line">		<span class="attribute">overflow</span>: hidden;</span><br><span class="line">		<span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">background-color</span>: <span class="number">#f0f0f0</span>;</span><br><span class="line">		<span class="attribute">word-break</span>: break-all;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.resize-bar</span> &#123;</span><br><span class="line">	<span class="attribute">overflow</span>: scroll;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">resize</span>: horizontal;</span><br><span class="line">	&amp;::-webkit-scrollbar &#123;</span><br><span class="line">		width: <span class="number">200px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	&amp;<span class="selector-pseudo">:hover</span>,</span><br><span class="line">	&amp;<span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">		&amp; ~ <span class="selector-class">.resize-line</span> &#123;</span><br><span class="line">			<span class="attribute">border-left</span>: <span class="number">1px</span> dashed <span class="variable">$blue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.resize-line</span> &#123;</span><br><span class="line">	<span class="attribute">position</span>: absolute;</span><br><span class="line">	<span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">border-left</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">	<span class="attribute">border-right</span>: <span class="number">2px</span> solid <span class="number">#f0f0f0</span>;</span><br><span class="line">	<span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.resize-text</span> &#123;</span><br><span class="line">	<span class="attribute">overflow-x</span>: hidden;</span><br><span class="line">	<span class="attribute">position</span>: absolute;</span><br><span class="line">	<span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">	<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">word-break</span>: break-all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>PS：本文整理自 <a target="_blank" rel="noopener" href="https://juejin.im/post/5d4d0ec651882549594e7293">https://juejin.im/post/5d4d0ec651882549594e7293</a> 侵删。</p></blockquote></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.nirongfei.site/blog-hexo/2018/05/04/frontend/180504/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog-hexo/images/avatar.png"><meta itemprop="name" content="阳明先生"><meta itemprop="description" content="知之真切笃实处即是行 行之明觉精察处即是知"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="阳明先生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/blog-hexo/2018/05/04/frontend/180504/" class="post-title-link" itemprop="url">前端开发技巧-CSS Layout</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-04 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-04T00:00:00+08:00">2018-05-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-11-18 15:57:04" itemprop="dateModified" datetime="2020-11-18T15:57:04+08:00">2020-11-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog-hexo/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>6.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="使用-vw-定制-rem-自适应布局"><a href="#使用-vw-定制-rem-自适应布局" class="headerlink" title="使用 vw 定制 rem 自适应布局"></a>使用 vw 定制 rem 自适应布局</h2><p>要点：移动端使用 <code>rem</code> 布局需要通过 JS 设置不同屏幕宽高比的 <code>font-size</code>，结合 <code>vw</code> 单位和 <code>calc()</code> 可脱离 JS 的控制。</p><p>场景：<code>rem</code> 页面布局(不兼容低版本移动端系统)。</p><p>兼容：<code>vw</code>、<code>calc()</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 基于UI width=750px DPR=2的页面 */</span></span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: calc(<span class="number">100vw</span> / <span class="number">7.5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-nth-child-选择指定元素"><a href="#使用-nth-child-选择指定元素" class="headerlink" title="使用:nth-child()选择指定元素"></a>使用:nth-child()选择指定元素</h2><p>要点：通过 <code>:nth-child()</code> 筛选指定的元素设置样式。</p><p>场景：表格着色、边界元素排版(首元素、尾元素、左右两边元素)。</p><p>兼容：<code>:nth-child()</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/voRzNP">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8nth-child%E9%80%89%E6%8B%A9%E6%8C%87%E5%AE%9A%E5%85%83%E7%B4%A0.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.specified-scope</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:nth-child</span>(odd) &#123;</span><br><span class="line">			<span class="attribute">background-color</span>: <span class="number">#f66</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:nth-child</span>(even) &#123;</span><br><span class="line">			<span class="attribute">background-color</span>: <span class="number">#66f</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:nth-child</span>(n+6)<span class="selector-pseudo">:nth-child</span>(-n+10) &#123;</span><br><span class="line">			<span class="attribute">background-color</span>: <span class="number">#3c9</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-writing-mode-排版竖文"><a href="#使用-writing-mode-排版竖文" class="headerlink" title="使用 writing-mode 排版竖文"></a>使用 writing-mode 排版竖文</h2><p>要点：通过 <code>writing-mode</code> 调整文本排版方向。</p><p>场景：竖行文字、文言文、诗词。</p><p>兼容：<code>writing-mode</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/XvExJO">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8writing-mode%E6%8E%92%E7%89%88%E7%AB%96%E6%96%87.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.vertical-text</span> &#123;</span><br><span class="line">	writing-mode: vertical-rl;</span><br><span class="line">	<span class="selector-tag">h3</span> &#123;</span><br><span class="line">		<span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">		<span class="attribute">font-weight</span>: bold;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">		<span class="attribute">color</span>: <span class="variable">$red</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">p</span> &#123;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">		<span class="attribute">color</span>: <span class="variable">$purple</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-text-align-last-对齐两端文本"><a href="#使用-text-align-last-对齐两端文本" class="headerlink" title="使用 text-align-last 对齐两端文本"></a>使用 text-align-last 对齐两端文本</h2><p>要点：通过 <code>text-align-last: justify</code> 设置文本两端对齐。</p><p>场景：未知字数中文对齐。</p><p>兼容：<code>text-align-last</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/ZgxZJa">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8text-align-last%E5%AF%B9%E9%BD%90%E4%B8%A4%E7%AB%AF%E6%96%87%E6%9C%AC.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.justify-text</span> &#123;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">		<span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">background-color</span>: <span class="variable">$red</span>;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">text-align-last</span>: justify;</span><br><span class="line">		<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">			<span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-not-去除无用属性"><a href="#使用-not-去除无用属性" class="headerlink" title="使用:not()去除无用属性"></a>使用:not()去除无用属性</h2><p>要点：通过 <code>:not()</code> 排除指定元素不使用设置样式</p><p>场景：符号分割文字、边界元素排版(首元素、尾元素、左右两边元素)</p><p>兼容：<code>:not()</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/gVeyqr">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8not%E5%8E%BB%E9%99%A4%E6%97%A0%E7%94%A8%E5%B1%9E%E6%80%A7.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cleared-attr</span> &#123;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">span</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: inline-block;</span><br><span class="line">		<span class="attribute">color</span>: <span class="variable">$purple</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-class">.first-line</span> <span class="selector-tag">span</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:last-child</span>)<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">		<span class="attribute">content</span>: <span class="string">&quot;,&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-class">.second-line</span> <span class="selector-tag">span</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:nth-child</span>(-n+3)) &#123;</span><br><span class="line">		<span class="attribute">display</span>: none;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-object-fit-规定图像尺寸"><a href="#使用-object-fit-规定图像尺寸" class="headerlink" title="使用 object-fit 规定图像尺寸"></a>使用 object-fit 规定图像尺寸</h2><p>要点：通过 <code>object-fit</code> 使图像脱离 <code>background-size</code> 的约束，使用 <code>&lt;img&gt;</code> 来标记图像背景尺寸</p><p>场景：图片尺寸自适应</p><p>兼容：<code>object-fit</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/LwBKLV">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8object-fit%E8%A7%84%E5%AE%9A%E5%9B%BE%E5%83%8F%E5%B0%BA%E5%AF%B8.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">	<span class="attribute">font-weight</span>: bold;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="variable">$red</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.image-size</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: flex;</span><br><span class="line">	<span class="attribute">justify-content</span>: space-between;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">h3</span> &#123;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">text-align</span>: center;</span><br><span class="line">		<span class="attribute">font-weight</span>: bold;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">img</span> &#123;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">260px</span>;</span><br><span class="line">		<span class="attribute">background-color</span>: <span class="variable">$green</span>;</span><br><span class="line">		&amp;<span class="selector-class">.cover</span> &#123;</span><br><span class="line">			<span class="selector-tag">object</span>-fit: cover;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-class">.contain</span> &#123;</span><br><span class="line">			<span class="selector-tag">object</span>-fit: contain;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-class">.fill</span> &#123;</span><br><span class="line">			<span class="selector-tag">object</span>-fit: fill;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-class">.scale-down</span> &#123;</span><br><span class="line">			<span class="selector-tag">object</span>-fit: scale-down;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-overflow-x-排版横向列表"><a href="#使用-overflow-x-排版横向列表" class="headerlink" title="使用 overflow-x 排版横向列表"></a>使用 overflow-x 排版横向列表</h2><p>要点：通过 <code>flexbox</code> 或 <code>inline-block</code> 的形式横向排列元素，对父元素设置 <code>overflow-x: auto</code> 横向滚动查看</p><p>场景：横向滚动列表、元素过多但位置有限的导航栏</p><p>兼容：<code>overflow-x</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/jONqyVd">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8overflow-x%E6%8E%92%E7%89%88%E6%A8%AA%E5%90%91%E5%88%97%E8%A1%A8.gif"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.horizontal-list</span> &#123;</span><br><span class="line">	<span class="attribute">overflow</span>: hidden;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">	<span class="selector-tag">ul</span> &#123;</span><br><span class="line">		<span class="attribute">overflow-x</span>: scroll;</span><br><span class="line">		<span class="attribute">cursor</span>: pointer;</span><br><span class="line">		&amp;::-webkit-scrollbar &#123;</span><br><span class="line">			height: <span class="number">10px</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;::-webkit-scrollbar-track &#123;</span><br><span class="line">			background-color: <span class="number">#f0f0f0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;::-webkit-scrollbar-thumb &#123;</span><br><span class="line">			border-radius: <span class="number">5px</span>;</span><br><span class="line">			<span class="attribute">background-color</span>: <span class="variable">$red</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">overflow</span>: hidden;</span><br><span class="line">		<span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">90px</span>;</span><br><span class="line">		<span class="attribute">background-color</span>: <span class="variable">$purple</span>;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">90px</span>;</span><br><span class="line">		<span class="attribute">text-align</span>: center;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">		<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">			<span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span> &#123;</span><br><span class="line">	<span class="selector-tag">ul</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: flex;</span><br><span class="line">		<span class="attribute">flex-wrap</span>: nowrap;</span><br><span class="line">		<span class="attribute">justify-content</span>: space-between;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">flex-basis</span>: <span class="number">90px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.inline</span> &#123;</span><br><span class="line">	<span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">102px</span>;</span><br><span class="line">	<span class="selector-tag">ul</span> &#123;</span><br><span class="line">		<span class="attribute">overflow-y</span>: hidden;</span><br><span class="line">		<span class="attribute">white-space</span>: nowrap;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: inline-block;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">90px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-text-overflow-控制文本溢出"><a href="#使用-text-overflow-控制文本溢出" class="headerlink" title="使用 text-overflow 控制文本溢出"></a>使用 text-overflow 控制文本溢出</h2><p>要点：通过 <code>text-overflow: ellipsis</code> 对溢出的文本在末端添加 <code>...</code></p><p>场景：单行文字溢出、多行文字溢出</p><p>兼容：<code>text-overflow</code>、<code>-webkit-line-clamp</code>、<code>-webkit-box-orient</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/mdbPmyy">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8text-overflow%E6%8E%A7%E5%88%B6%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[class*=-line]</span> &#123;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.single-line</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.multiple-line</span> &#123;</span><br><span class="line">	<span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">	<span class="attribute">text-align</span>: justify;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sl-ellipsis</span> &#123;</span><br><span class="line">	<span class="attribute">overflow</span>: hidden;</span><br><span class="line">	<span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">	<span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.ml-ellipsis</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: -webkit-box;</span><br><span class="line">	<span class="attribute">overflow</span>: hidden;</span><br><span class="line">	<span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">	-webkit-line-clamp: <span class="number">3</span>;</span><br><span class="line">	<span class="comment">/* autoprefixer: off */</span></span><br><span class="line">	-webkit-box-orient: vertical;</span><br><span class="line">	<span class="comment">/* autoprefixer: on */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mls-ellipsis</span> &#123;</span><br><span class="line">	<span class="attribute">overflow</span>: hidden;</span><br><span class="line">	<span class="attribute">position</span>: relative;</span><br><span class="line">	<span class="attribute">max-height</span>: <span class="number">90px</span>;</span><br><span class="line">	&amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">		<span class="attribute">position</span>: absolute;</span><br><span class="line">		<span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">padding-left</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">background</span>: linear-gradient(to right, transparent, <span class="number">#fff</span> <span class="number">50%</span>);</span><br><span class="line">		<span class="attribute">content</span>: <span class="string">&quot;...&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-transform-描绘-1px-边框"><a href="#使用-transform-描绘-1px-边框" class="headerlink" title="使用 transform 描绘 1px 边框"></a>使用 transform 描绘 1px 边框</h2><p>要点：分辨率比较低的屏幕下显示 1px 的边框会显得模糊，通过 <code>::before</code> 或 <code>::after</code> 和 <code>transform</code> 模拟细腻的 1px 边框</p><p>场景：容器 1px 边框</p><p>兼容：<code>transform</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/YzKqMVO">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8transform%E6%8F%8F%E7%BB%981px%E8%BE%B9%E6%A1%86.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.onepx-border</span> &#123;</span><br><span class="line">	<span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">	<span class="attribute">cursor</span>: pointer;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">80px</span>;</span><br><span class="line">	<span class="attribute">text-align</span>: center;</span><br><span class="line">	<span class="attribute">font-weight</span>: bold;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="variable">$red</span>;</span><br><span class="line">	&amp;<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">		<span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.normal</span> &#123;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$red</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.thin</span> &#123;</span><br><span class="line">	<span class="attribute">position</span>: relative;</span><br><span class="line">	&amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">		<span class="attribute">position</span>: absolute;</span><br><span class="line">		<span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$red</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">		<span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="attribute">transform</span>: scale(.<span class="number">5</span>);</span><br><span class="line">		<span class="attribute">transform-origin</span>: left top;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-transform-翻转内容"><a href="#使用-transform-翻转内容" class="headerlink" title="使用 transform 翻转内容"></a>使用 transform 翻转内容</h2><p>要点：通过 <code>transform: scale3d()</code> 对内容进行翻转(水平翻转、垂直翻转、倒序翻转)</p><p>场景：内容翻转</p><p>兼容：<code>transform</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/NWKNZwO">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8transform%E7%BF%BB%E8%BD%AC%E5%86%85%E5%AE%B9.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.horizontal-flip</span> &#123;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">position</span>: relative;</span><br><span class="line">		<span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">121px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">51px</span>;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">51px</span>;</span><br><span class="line">		<span class="attribute">text-align</span>: center;</span><br><span class="line">		<span class="attribute">font-weight</span>: bold;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">		<span class="attribute">color</span>: <span class="variable">$red</span>;</span><br><span class="line">		&amp;<span class="selector-pseudo">::before</span>,</span><br><span class="line">		&amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">			<span class="attribute">position</span>: absolute;</span><br><span class="line">			<span class="attribute">background-color</span>: <span class="variable">$purple</span>;</span><br><span class="line">			<span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">			<span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.x-axis</span> &#123;</span><br><span class="line">	<span class="attribute">transform</span>: scale3d(<span class="number">1</span>, -<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">	&amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">		<span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">top</span>: <span class="number">25px</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.y-axis</span> &#123;</span><br><span class="line">	<span class="attribute">transform</span>: scale3d(-<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">	&amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">		<span class="attribute">left</span>: <span class="number">60px</span>;</span><br><span class="line">		<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.reverse</span> &#123;</span><br><span class="line">	<span class="attribute">transform</span>: scale3d(-<span class="number">1</span>, -<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">	&amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">		<span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">top</span>: <span class="number">25px</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	&amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">		<span class="attribute">left</span>: <span class="number">60px</span>;</span><br><span class="line">		<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-letter-spacing-排版倒序文本"><a href="#使用-letter-spacing-排版倒序文本" class="headerlink" title="使用 letter-spacing 排版倒序文本"></a>使用 letter-spacing 排版倒序文本</h2><p>要点：通过 <code>letter-spacing</code> 设置负值字体间距将文本倒序</p><p>场景：文言文、诗词</p><p>兼容：<code>letter-spacing</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/zYOBgqB">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8letter-spacing%E6%8E%92%E7%89%88%E5%80%92%E5%BA%8F%E6%96%87%E6%9C%AC.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.reverse-text</span> &#123;</span><br><span class="line">	<span class="attribute">font-weight</span>: bold;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="variable">$red</span>;</span><br><span class="line">	<span class="attribute">letter-spacing</span>: -<span class="number">100px</span>; <span class="comment">// letter-spacing最少是font-size的2倍</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-margin-left-排版左重右轻列表"><a href="#使用-margin-left-排版左重右轻列表" class="headerlink" title="使用 margin-left 排版左重右轻列表"></a>使用 margin-left 排版左重右轻列表</h2><p>要点：使用 <code>flexbox</code> 横向布局时，最后一个元素通过 <code>margin-left: auto</code> 实现向右对齐</p><p>场景：右侧带图标的导航栏</p><p>兼容：<code>margin</code></p><p>代码：<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung/pen/PoYpROw">在线演示</a></p><p><img src="https://yangzw.vip/static/article/css-skill/%E4%BD%BF%E7%94%A8margin-left%E6%8E%92%E7%89%88%E5%B7%A6%E9%87%8D%E5%8F%B3%E8%BD%BB%E5%88%97%E8%A1%A8.png"></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.left-list</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: flex;</span><br><span class="line">	<span class="attribute">align-items</span>: center;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="variable">$green</span>;</span><br><span class="line">	<span class="selector-tag">li</span> &#123;</span><br><span class="line">		<span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">background-color</span>: <span class="variable">$orange</span>;</span><br><span class="line">		<span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">		<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">		&amp; + <span class="selector-tag">li</span> &#123;</span><br><span class="line">			<span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&amp;<span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">			<span class="attribute">margin-left</span>: auto;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>PS：本文整理自 <a target="_blank" rel="noopener" href="https://juejin.im/post/5d4d0ec651882549594e7293">https://juejin.im/post/5d4d0ec651882549594e7293</a> 侵删。</p></blockquote></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.nirongfei.site/blog-hexo/2018/05/01/frontend/180501/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog-hexo/images/avatar.png"><meta itemprop="name" content="阳明先生"><meta itemprop="description" content="知之真切笃实处即是行 行之明觉精察处即是知"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="阳明先生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/blog-hexo/2018/05/01/frontend/180501/" class="post-title-link" itemprop="url">前端开发总结-移动端</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-01 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-01T00:00:00+08:00">2018-05-01</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-11-18 15:57:04" itemprop="dateModified" datetime="2020-11-18T15:57:04+08:00">2020-11-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog-hexo/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>7.2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>7 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><p>开始得方案是：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;Helvetica Neue&#x27;</span>, Helvetica, <span class="string">&#x27;microsoft yahei&#x27;</span>, sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>升级后的方案：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="string">&#x27;PingFang SC&#x27;</span>, <span class="string">&#x27;Helvetica Neue&#x27;</span>, <span class="string">&#x27;Microsoft Yahei&#x27;</span>, Tahoma, STHeiti,</span><br><span class="line">    Simsun, sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以前 iOS 版本降级使用 <code>Helvetica</code>，中文字体设置为华文黑体 <code>STHeiTi</code>， iOS 9+ 就开始支持 <code>-apple-system</code> 参数了， Chrome 使用 <code>BlinkMacSystemFont</code> ，兼容 iOS/MacOS。<br>现在很多设计师的字体都是 <code>PingFang</code>，所以这里做了一个兼容。 顺便用 <code>Microsoft Yahei</code> 兼容了一下 Window 系统。</p><p>原生 Android 下中文字体与英文字体都选择默认的无衬线字体。 但是因为安卓系统可以去改系统的默认字体，而且每一个手机厂家也会内置字体，所以直接让他去选择默认的吧。不用单独去折腾安卓的字体了。</p><h2 id="适配"><a href="#适配" class="headerlink" title="适配"></a>适配</h2><p>现在主流的适配方案是阿里的 <code>flexible</code>，但是在开发中每个 <code>device pixel ratio</code> 都要写一个样式，虽然可以用 <code>sass</code>、<code>less</code> 的 <code>mixmin</code> 用法来处理，但是不同尺寸屏幕下会出现显示文字长度不一致的情况。<br>所以后面就放弃了这个方案，换回以前项目中使用的方案，根据 <code>750px</code> 宽度的设计稿换算成 <code>rem</code> 单位， 而 <code>rem</code> 根据根元素 <code>&lt;html&gt;</code> 的 <code>font-size</code> 计算得出。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cosnt html = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;html&#x27;</span>)</span><br><span class="line">html.style.fontSize = html.offsetWidth / <span class="number">7.5</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line"><span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> html = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;html&#x27;</span>)</span><br><span class="line">  html.style.fontSize = html.offsetWidth / <span class="number">7.5</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：移动端的 1px 边框不能用 rem 换算，移动端 1px 边框的处理方案有两种，一种方是设置 initial-scale=0.5 另一种是通过伪类来处理。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">positon</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>优化后的方案：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">designWidth, rem2px, fixedWidth</span>) </span>&#123;</span><br><span class="line">  designWidth = designWidth || <span class="number">750</span>;</span><br><span class="line">  rem2px = rem2px || <span class="number">100</span>;</span><br><span class="line">  fixedWidth = fixedWidth || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> docEl = <span class="built_in">document</span>.documentElement;</span><br><span class="line">  <span class="keyword">var</span> body = <span class="built_in">document</span>.querySelector(<span class="string">&quot;body&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">Number</span>(fixedWidth)) &#123;</span><br><span class="line">    body.style.maxWidth = designWidth / rem2px + <span class="string">&#x27;rem&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    body.style.maxWidth = fixedWidth / rem2px + <span class="string">&#x27;rem&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  body.style.margin = <span class="string">&#x27;auto&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> tempWidth = <span class="built_in">window</span>.screen.width;</span><br><span class="line">  <span class="keyword">var</span> tempHeight = <span class="built_in">window</span>.screen.height;</span><br><span class="line">  <span class="keyword">var</span> minWidth = tempWidth &gt; tempHeight ? tempHeight : tempWidth;</span><br><span class="line">  <span class="keyword">var</span> orientation = <span class="built_in">window</span>.orientation;</span><br><span class="line">  <span class="keyword">var</span> tempDom = <span class="built_in">window</span>.document.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">  tempDom.style.width = <span class="string">&#x27;1rem&#x27;</span>;</span><br><span class="line">  tempDom.style.display = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> head = <span class="built_in">window</span>.document.getElementsByTagName(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">  head.appendChild(tempDom);</span><br><span class="line">  <span class="keyword">var</span> defaultFontSize = <span class="built_in">parseFloat</span>(<span class="built_in">window</span>.getComputedStyle(tempDom, <span class="literal">null</span>).getPropertyValue(<span class="string">&#x27;width&#x27;</span>));</span><br><span class="line">  tempDom.remove();</span><br><span class="line">  <span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span>(orientation) == <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> newWidth = <span class="built_in">window</span>.screen.width;</span><br><span class="line">        <span class="keyword">if</span> (newWidth != tempWidth) &#123;</span><br><span class="line">          tempWidth = newWidth</span><br><span class="line">          ReSetFontSize();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (orientation != <span class="built_in">window</span>.orientation) &#123;</span><br><span class="line">          orientation = <span class="built_in">window</span>.orientation;</span><br><span class="line">          ReSetFontSize();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">100</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ReSetFontSize</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    body.style.height = docEl.clientHeight + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">    docEl.style.fontSize = minWidth / designWidth _ rem2px / defaultFontSize _ <span class="number">100</span> + <span class="string">&quot;%&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ReSetFontSize();</span><br><span class="line">  <span class="built_in">document</span>.body.classList.remove(<span class="string">&#x27;vhidden&#x27;</span>);</span><br><span class="line">&#125;)(<span class="number">750</span>, <span class="number">100</span>, <span class="number">750</span>);</span><br></pre></td></tr></table></figure><h2 id="line-height"><a href="#line-height" class="headerlink" title="line-height"></a>line-height</h2><p>移动端经常会遇到文本垂直居中的问题，在谷歌模拟器里面文本垂直居中，但是到手机上文字会向上偏移，而且安卓系统出现的较多。通过 <code>transform</code> 可以解决这个问题，但是写起来比较繁琐，这里提供两种方法：</p><h4 id="padding"><a href="#padding" class="headerlink" title="padding"></a>padding</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.26rem</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.22rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>虽然上面的方法可以实现，但是用起来的时候经常每次都要去计算高度，这样比较麻烦，而且在面对多行的情况还得计算，可以采用了下面的方式：</p><h4 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">box-pack</span>: center;</span><br><span class="line">  <span class="attribute">box-pack-align</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0.9rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.26rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><p>移动端的布局切记不要使用 <code>postion:fixed</code>，这个属性在 iOS 下会有很多 Bug。这里简单总结分类如下：</p><ul><li>无固定栏页面</li></ul><p>什么叫无固定项，所谓的无固定项页面就是整个网页从上到下没有没有固定在页面上的按钮，头部没有固定的按钮，底部没有固定的按钮，左右两侧也没有侧边栏。用户唯一的操作就是滑动页面到底部。这一类直接跟写 PC 一样的写法就行了。</p><ul><li>固定项栏页面</li></ul><p>基本上市面上所看到的移动端的页面都是固定头部和底部，少量的会加入侧边工具栏。这里主要讲固定头部和底部的。<br>下面的例子主要把页面分为头部，内容，底部三部分。</p><blockquote><p>iOS 系统在滑动屏幕时会顿卡，需要设置 <code>-webkit-overflow-scrolling:touch;</code></p></blockquote><h2 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h2><p>这个 BFC 不是格式化上下文，而是往返缓存 (Back Forward Cache)，这个特性最早出现在 Firefox 和 Opera 浏览器上，可以在用户使用浏览器中前进/后退时提升页面的转换速度。原理就是浏览器会缓存页面，当用户访问之前页面时，浏览器会直接从缓存中获取页面展现到前台。但是这样会导致用户在子页面与上一个页面之前存在管理的时候，操作返回上个页面的状态并没有更改。</p><p>这个时候我们需要去检测页面是不是从缓存中获取的:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">window</span>).on(<span class="string">&#x27;pageshow&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (event.persisted) &#123;</span><br><span class="line">    location.reload(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;pageshow&quot;</span>, <span class="function"><span class="title">funtion</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (event.persisted) &#123;</span><br><span class="line">    location.reload(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="交互"><a href="#交互" class="headerlink" title="交互"></a>交互</h2><p>现在内嵌 H5 开发使用最多的方式是通过 JSBridge 来通信，其主要原理就是就是通过触发 url 变化获取数据信息。以前 Android4.2 以下 <code>addJavascriptInterface</code> 有安全漏洞，iOS7 以下无法使用 iOS 提供的 API <code>messageHandlers</code> ，现在可以放心大胆的使用 JSBridge。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ua = navigator.userAgent.toLowerCase()</span><br><span class="line"><span class="built_in">window</span>.isAndroid = <span class="regexp">/android/</span>.test(ua)</span><br><span class="line"><span class="built_in">window</span>.HtmlWebviewCallNative = <span class="function"><span class="keyword">function</span>(<span class="params">par</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/客户端 ua 标识/</span>.test(ua)) &#123;</span><br><span class="line">    <span class="comment">//判断是否在客户端打开的页面</span></span><br><span class="line">    <span class="keyword">if</span> (isAndroid) &#123;</span><br><span class="line">      <span class="comment">//Android 这个是安卓向浏览器注入的对象，这个看安卓客户端给的是什么</span></span><br><span class="line">      Android.HTMLCallNative(<span class="built_in">JSON</span>.stringify(par))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.webkit.messageHandlers.HTMLCallNative.postMessage(par)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(par))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HTMLCallNative(&#123;</span><br><span class="line">  functionName: <span class="string">&#x27;callPhone&#x27;</span>,</span><br><span class="line">  params: [<span class="string">&#x27;13883785984&#x27;</span>, <span class="string">&#x27;18323270482&#x27;</span>],</span><br><span class="line">  callback: <span class="string">&#x27;callbackFunctionName&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>原理以及参数说明：</p><ul><li>通过向 window 注册一个名字为 HTMLCallNative 的对象，以后每次向这个函数传递要通信的函数名和函数所需的参数即可；安卓是通过 addJavascriptInterface 直接注入页面，ios 是通过 WKWebView 的新特性 MessageHandler 来这个对象来实现 JS 调用原生方法。</li><li>约定 HTMLCallNative 这个方法名为 app 中默认用来接受新交互规则的入口函数，安卓和 ios 分别拿到 HTMLCallNative 传过来的 function 名字和参数。</li><li>客户端通过反射机制，查找字符串函数名对应的函数并执行函数，此时通信成功。</li><li><code>functionName</code>： 必为字符串，驼峰式命名，这个字符串为真正调用的方法，需要前端跟客户端共同来定义。</li><li><code>params</code>：方法需要的参数，无需对参数进行 encodeURI 和 encodeURIComponent， 支持字符串，array，object。</li><li><code>callback</code>： 有回调函数时，传入这个参数，只需要传入函数名称即可，若回调函数需要传入参数，app 端在调用的时候传入即可，跟当时业务相关，这里就不约定格式了。</li></ul><p>相比 JSBridge 的优点：</p><ul><li>在 JS 中写起来简单，不用再用创建 iframe 然后触发 URL 的方式那么麻烦了。</li><li>JS 传递参数更方便。使用拦截 URL 的方式传递参数，只能把参数拼接在后面，如果遇到要传递的参数中有特殊字符，如&amp;、=、？等，必须得转换，否则参数解析肯定会出错。</li></ul><p>例如传递的 <code>url</code> 是 <code>http://www.baidu.com/share/op...</code>，使用拦截 <code>url</code> 的 JS 调用方式：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loadURL(<span class="string">&quot;firstClick://shareClick?title=分享的标题&amp;content=分享的内容&amp;url=链接地址&amp;imagePath=图片地址&quot;</span>); &#125;</span><br></pre></td></tr></table></figure><p>将上面的 <code>url</code> 放入链接地址后，根本无法区分 <code>share_uuid</code> 是其他参数，还是 <code>url</code> 里附带的参数，但是使用 MessageHandler 就可以避免特殊字符引起的问题。</p><h2 id="跳转"><a href="#跳转" class="headerlink" title="跳转"></a>跳转</h2><p>首先，我们看下安卓的配置文件和 <code>scheme</code>：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity android:name = <span class="string">&quot;.MainActivity&quot;</span>&gt;</span><br><span class="line">    &lt;intent-filter&gt;</span><br><span class="line">        &lt;action android:name = <span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span><br><span class="line">        &lt;category android:name = <span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span><br><span class="line">    &lt;/intent-filter&gt;</span><br><span class="line">    &lt;intent-filter&gt;</span><br><span class="line">        &lt;action android:name=<span class="string">&quot;android.intent.action.VIEW&quot;</span>/&gt;</span><br><span class="line">        &lt;category android:name=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span>/&gt;</span><br><span class="line">        &lt;category android:name=<span class="string">&quot;android.intent.category.BROWSABLE&quot;</span>/&gt;</span><br><span class="line">        &lt;data android:host=<span class="string">&quot;xxx.com&quot;</span> android:scheme=<span class="string">&quot;abraham&quot;</span>/&gt;</span><br><span class="line">    &lt;/intent-filter&gt;</span><br><span class="line">&lt;/activity&gt;</span><br></pre></td></tr></table></figure><blockquote><p>重点：<code>&lt;data android:host=&quot;xxx.com&quot; android:scheme=&quot;abraham&quot;/&gt;</code>，前端根据此标签唤醒 APP。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;abraham:/xxx.com/?pid=1&quot;</span> /&gt;</span><br></pre></td></tr></table></figure><p>Android 系统下 <code>schema</code> 拼接协议的格式是 <code>[scheme]://[host]/[path]?[query]</code>，iOS 也有自己的协议，通常在写之前需要获取协议。注意 <code>schema</code> 协议要小写，否则会有不能响应的异常：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> u = navigator.userAgent</span><br><span class="line"><span class="keyword">var</span> isAndroid = u.indexOf(<span class="string">&#x27;Android&#x27;</span>) &gt; -<span class="number">1</span> || u.indexOf(<span class="string">&#x27;Linux&#x27;</span>) &gt; -<span class="number">1</span></span><br><span class="line"><span class="comment">//android 终端或者 uc 浏览器</span></span><br><span class="line"><span class="keyword">var</span> isiOS2 = !!u.match(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>)</span><br><span class="line"><span class="comment">//ios 终端</span></span><br><span class="line"><span class="keyword">if</span> (isAndroid) &#123;</span><br><span class="line">  <span class="built_in">window</span>.location.href = <span class="string">&#x27;安卓提供协议 url&#x27;</span></span><br><span class="line">  <span class="comment">/**_打开 app 的协议，有安卓同事提供_**/</span></span><br><span class="line">  <span class="built_in">window</span>.setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.location.href = <span class="string">&#x27;下载的地址&#x27;</span></span><br><span class="line">  &#125;, <span class="number">2000</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (isiOS2) &#123;</span><br><span class="line">  <span class="built_in">window</span>.location.href = <span class="string">&#x27;IOS 提供协议 url&#x27;</span></span><br><span class="line">  <span class="comment">/**_打开 app 的协议，有 ios 同事提供_**/</span></span><br><span class="line">  <span class="built_in">window</span>.setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.location.href = <span class="string">&#x27;下载的地址&#x27;</span></span><br><span class="line">  &#125;, <span class="number">2000</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">window</span>.location.href = <span class="string">&#x27;下载的地址&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.nirongfei.site/blog-hexo/2018/04/23/frontend/180423/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog-hexo/images/avatar.png"><meta itemprop="name" content="阳明先生"><meta itemprop="description" content="知之真切笃实处即是行 行之明觉精察处即是知"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="阳明先生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/blog-hexo/2018/04/23/frontend/180423/" class="post-title-link" itemprop="url">浏览器跨域通信</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-04-23 00:00:00" itemprop="dateCreated datePublished" datetime="2018-04-23T00:00:00+08:00">2018-04-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-11-18 15:57:04" itemprop="dateModified" datetime="2020-11-18T15:57:04+08:00">2020-11-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog-hexo/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>7.1k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h3><p>浏览器同源政策是指 A 网页设置的 Cookie，B 网页不能打开，除非这两个网页”同源”。所谓”同源”指的是</p><ul><li>协议相同</li><li>域名相同</li><li>端口相同</li></ul><p>比如 <code>http://www.example.com/dir/page.html</code> 这个网址，协议是 <code>http://</code>，域名是 <code>www.example.com</code>，端口是 <code>80</code>（默认端口可以省略），它的同源情况如下</p><ul><li><code>http://www.example.com/dir2/other.html</code>：同源</li><li><code>http://example.com/dir/other.html</code>：不同源（域名不同）</li><li><code>http://v2.www.example.com/dir/other.html</code>：不同源（域名不同）</li><li><code>http://www.example.com:81/dir/other.html</code>：不同源（端口不同）</li></ul><h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><p>同源政策的目的是为了保证用户信息的安全，防止恶意的网站窃取数据。</p><p>设想这样一种情况：A 网站是一家银行，用户登录以后又去浏览其他网站，如果其他网站可以读取 A 网站的 Cookie 会发生什么？</p><p>很显然，如果 Cookie 包含隐私（比如存款总额），这些信息就会泄漏。更可怕的是 Cookie 往往用来保存用户的登录状态，如果用户没有退出登录，其他网站就可以冒充用户为所欲为。因为浏览器同时还规定，提交表单不受同源政策的限制。</p><p>由此可见，”同源政策”是必需的，否则 Cookie 可以共享，互联网就毫无安全可言了。</p><h3 id="限制"><a href="#限制" class="headerlink" title="限制"></a>限制</h3><p>随着互联网的发展，”同源政策”越来越严格。目前，非同源情况下会受到一下限制</p><ul><li>无法读取 Cookie、LocalStorage 和 IndexDB</li><li>无法获得 DOM</li><li>无法发送 AJAX 请求</li></ul><p>虽然这些限制是必要的，但是有时会影响合理的功能需求。</p><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>Cookie 是服务器写入浏览器的数据信息，只有同源的网页才能共享。但是当两个网页一级域名相同，只是二级域名不同时，可以通过设置相同的 <code>document.domain</code> 共享 Cookie。</p><p>举例来说，A 网页是 <code>http://w1.example.com/a.html</code>，B 网页是 <code>http://w2.example.com/b.html</code>，那么只要设置相同的 <code>document.domain</code>，两个网页就可以共享 Cookie。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.domain = <span class="string">&#x27;example.com&#x27;</span></span><br></pre></td></tr></table></figure><p>A 网页通过脚本设置 Cookie</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">&#x27;test=hello&#x27;</span></span><br></pre></td></tr></table></figure><p>B 网页就可以读到这个 Cookie</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cookie = <span class="built_in">document</span>.cookie</span><br></pre></td></tr></table></figure><p>::: tip<br>注意，这种方法只适用于 Cookie 和 iframe 窗口，LocalStorage 和 IndexDB 无法通过这种方法规避同源政策，而要使用下面介绍的 PostMessage。<br>:::</p><p>另外，服务器也可以在设置 Cookie 的时候，指定 Cookie 的所属域名为一级域名，比如 <code>.example.com</code>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set</span>-Cookie: key=value; domain=.example.com; path=/</span><br></pre></td></tr></table></figure><p>这样的话，二级域名和三级域名不用做任何设置，都可以读取这个 Cookie。</p><h2 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h2><p>如果两个网页不同源就无法拿到对方的 DOM，典型的例子是 <code>iframe</code> 窗口和 <code>window.open</code> 方法打开的窗口，它们与父窗口之间无法通信。</p><p>比如，父窗口运行下面的命令，如果 <code>iframe</code> 窗口不是同源就会报错</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;myIFrame&#x27;</span>).contentWindow.document</span><br><span class="line"><span class="comment">// Uncaught DOMException: Blocked a frame from accessing a cross-origin frame.</span></span><br></pre></td></tr></table></figure><p>上面命令中，父窗口想获取子窗口的 DOM，因为跨源导致报错。反之亦然，子窗口获取主窗口的 DOM 也会报错。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.parent.document.body</span><br><span class="line"><span class="comment">// 报错</span></span><br></pre></td></tr></table></figure><p>如果两个窗口一级域名相同，只是二级域名不同，那么设置上一节介绍的 <code>document.domain</code> 属性，就可以规避同源政策拿到 DOM。</p><p>对于完全不同源的网站，目前有一下三种方法可以解决跨域窗口的通信问题</p><ul><li>片段识别符（fragment identifier）</li><li>window.name</li><li>跨文档通信 API（Cross-document messaging）</li></ul><h3 id="片段识别符"><a href="#片段识别符" class="headerlink" title="片段识别符"></a>片段识别符</h3><p>片段标识符（fragment identifier）指的是 URL 的#号后面的部分，比如 <code>http://example.com/x.html#fragment</code> 的 <code>#fragment</code>。如果只是改变片段标识符，页面不会重新刷新。</p><p>父窗口可以把信息，写入子窗口的片段标识符</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> src = originURL + <span class="string">&#x27;#&#x27;</span> + data</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;myIFrame&#x27;</span>).src = src</span><br></pre></td></tr></table></figure><p>子窗口通过监听 <code>hashchange</code> 事件得到通知</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onhashchange = checkMessage</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkMessage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> message = <span class="built_in">window</span>.location.hash</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同样的，子窗口也可以改变父窗口的片段标识符</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parent.location.href = target + <span class="string">&#x27;#&#x27;</span> + hash</span><br></pre></td></tr></table></figure><h3 id="window-name"><a href="#window-name" class="headerlink" title="window.name"></a>window.name</h3><p>浏览器窗口有 <code>window.name</code> 属性。这个属性的最大特点是无论是否同源，只要在同一个窗口里，前一个网页设置了这个属性，后一个网页可以读取它。</p><p>父窗口先打开一个子窗口，载入一个不同源的网页，该网页将信息写入 <code>window.name</code> 属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.name = data</span><br></pre></td></tr></table></figure><p>接着，子窗口跳回一个与主窗口同域的网址</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location = <span class="string">&#x27;http://parent.url.com/xxx.html&#x27;</span></span><br></pre></td></tr></table></figure><p>然后，主窗口就可以读取子窗口的 <code>window.name</code> 了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;myFrame&#x27;</span>).contentWindow.name</span><br></pre></td></tr></table></figure><p>这种方法的优点是 <code>window.name</code> 容量很大，可以放置非常长的字符串；缺点是必须监听子窗口 <code>window.name</code> 属性的变化会影响网页性能。</p><h3 id="window-postMessage"><a href="#window-postMessage" class="headerlink" title="window.postMessage"></a>window.postMessage</h3><p>HTML5 为了解决这个问题引入了一个全新的 API：跨文档通信 API（Cross-document messaging）。<br>这个 API 为 <code>window</code> 对象新增了一个 <code>window.postMessage</code> 方法，允许跨窗口通信，不论这两个窗口是否同源。</p><p>举例来说，父窗口 <code>http://aaa.com</code> 向子窗口 <code>http://bbb.com</code> 发消息，调用 <code>postMessage</code> 方法就可以了。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> popup = <span class="built_in">window</span>.open(<span class="string">&#x27;http://bbb.com&#x27;</span>, <span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">popup.postMessage(<span class="string">&#x27;Hello World!&#x27;</span>, <span class="string">&#x27;http://bbb.com&#x27;</span>)</span><br></pre></td></tr></table></figure><p><code>postMessage</code> 方法的第一个参数是具体的信息内容，第二个参数是接收消息的窗口的源 <code>origin</code>，即”协议 + 域名 + 端口”。也可以设为 <code>*</code>，表示不限制域名，向所有窗口发送。</p><p>子窗口向父窗口发送消息的写法类似</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.opener.postMessage(<span class="string">&#x27;Nice to see you&#x27;</span>, <span class="string">&#x27;http://aaa.com&#x27;</span>)</span><br></pre></td></tr></table></figure><p>父窗口和子窗口都可以通过 <code>message</code> 事件监听对方的消息</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(</span><br><span class="line">  <span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.data)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">false</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><code>message</code> 事件的事件对象 <code>event</code> 提供以下三个属性</p><ul><li><code>event.source</code>：发送消息的窗口</li><li><code>event.origin</code>: 消息发向的网址</li><li><code>event.data</code>: 消息内容</li></ul><p>下面的例子是，子窗口通过 <code>event.source</code> 属性引用父窗口，然后发送消息。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;message&#x27;</span>, receiveMessage)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">receiveMessage</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.source.postMessage(<span class="string">&#x27;Nice to see you!&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>`event.origin 属性可以过滤掉不是发给本窗口的消息。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;message&#x27;</span>, receiveMessage)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">receiveMessage</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (event.origin !== <span class="string">&#x27;http://aaa.com&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">if</span> (event.data === <span class="string">&#x27;Hello World&#x27;</span>) &#123;</span><br><span class="line">    event.source.postMessage(<span class="string">&#x27;Hello&#x27;</span>, event.origin)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="LocalStorage"><a href="#LocalStorage" class="headerlink" title="LocalStorage"></a>LocalStorage</h3><p>除了发送消息，也可以通过 <code>window.postMessage</code> 读写其他窗口的 <code>localStorage</code>。</p><p>下面的例子是在主窗口写入 <code>iframe</code> 子窗口的 <code>localStorage</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e.origin !== <span class="string">&#x27;http://bbb.com&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> payload = <span class="built_in">JSON</span>.parse(e.data)</span><br><span class="line">  <span class="built_in">localStorage</span>.setItem(payload.key, <span class="built_in">JSON</span>.stringify(payload.data))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面代码中，子窗口将父窗口发来的消息，写入自己的 <code>localStorage</code>。</p><p>父窗口发送消息的代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> win = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;iframe&#x27;</span>)[<span class="number">0</span>].contentWindow</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">&#x27;Jack&#x27;</span> &#125;</span><br><span class="line">win.postMessage(<span class="built_in">JSON</span>.stringify(&#123; <span class="attr">key</span>: <span class="string">&#x27;storage&#x27;</span>, <span class="attr">data</span>: obj &#125;), <span class="string">&#x27;http://bbb.com&#x27;</span>)</span><br></pre></td></tr></table></figure><p>加强版的子窗口接收消息的代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e.origin !== <span class="string">&#x27;http://bbb.com&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">var</span> payload = <span class="built_in">JSON</span>.parse(e.data)</span><br><span class="line">  <span class="keyword">switch</span> (payload.method) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;set&#x27;</span>:</span><br><span class="line">      <span class="built_in">localStorage</span>.setItem(payload.key, <span class="built_in">JSON</span>.stringify(payload.data))</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;get&#x27;</span>:</span><br><span class="line">      <span class="keyword">var</span> parent = <span class="built_in">window</span>.parent</span><br><span class="line">      <span class="keyword">var</span> data = <span class="built_in">localStorage</span>.getItem(payload.key)</span><br><span class="line">      parent.postMessage(data, <span class="string">&#x27;http://aaa.com&#x27;</span>)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;remove&#x27;</span>:</span><br><span class="line">      <span class="built_in">localStorage</span>.removeItem(payload.key)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>加强版的父窗口发送消息代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> win = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;iframe&#x27;</span>)[<span class="number">0</span>].contentWindow</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">&#x27;Jack&#x27;</span> &#125;</span><br><span class="line"><span class="comment">// 存入对象</span></span><br><span class="line">win.postMessage(<span class="built_in">JSON</span>.stringify(&#123; <span class="attr">key</span>: <span class="string">&#x27;storage&#x27;</span>, <span class="attr">method</span>: <span class="string">&#x27;set&#x27;</span>, <span class="attr">data</span>: obj &#125;), <span class="string">&#x27;http://bbb.com&#x27;</span>)</span><br><span class="line"><span class="comment">// 读取对象</span></span><br><span class="line">win.postMessage(<span class="built_in">JSON</span>.stringify(&#123; <span class="attr">key</span>: <span class="string">&#x27;storage&#x27;</span>, <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span> &#125;), <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line"><span class="built_in">window</span>.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e.origin != <span class="string">&#x27;http://aaa.com&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="comment">// &quot;Jack&quot;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(e.data).name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><p>同源政策规定 AJAX 请求只能在同源网站间发送，除了架设代理服务器（浏览器请求同源服务器，再由后者请求外部服务），还有以下三种方法规避这个限制</p><ul><li>CORS</li><li>JSONP</li><li>WebSocket</li></ul><h3 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h3><p>CORS 是跨源资源分享（Cross-Origin Resource Sharing）的缩写。它是 W3C 标准中跨源 AJAX 请求的根本解决方法。相比 JSONP 只能发 GET 请求，CORS 允许任何类型的请求。</p><h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><p>JSONP 是服务器与客户端跨源通信的常用方法。最大特点就是简单适用，老式浏览器全部支持，服务器改造非常小。</p><p>它的基本原理是，网页通过添加一个 <code>&lt;script&gt;</code> 元素，向服务器请求 JSON 数据，这种做法不受同源政策限制；服务器收到请求后，将数据放在一个指定名字的回调函数里传回来。</p><p>首先，网页动态插入 <code>&lt;script&gt;</code> 元素，由它向跨源网址发出请求</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addScriptTag</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">  script.setAttribute(<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;text/javascript&#x27;</span>)</span><br><span class="line">  script.src = src</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(script)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  addScriptTag(<span class="string">&#x27;http://example.com/ip?callback=foo&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Your public IP address is: &#x27;</span> + data.ip)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面代码通过动态添加 <code>&lt;script&gt;</code> 元素，向服务器 <code>example.com</code> 发出请求。注意，该请求的查询字符串有一个 <code>callback</code> 参数，用来指定回调函数的名字，这对于 JSONP 是必需的。</p><p>服务器收到这个请求以后，会将数据放在回调函数的参数位置返回</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo(&#123;</span><br><span class="line">  ip: <span class="string">&#x27;8.8.8.8&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>由于 <code>&lt;script&gt;</code> 元素请求的脚本直接作为代码运行，这时只要浏览器定义了 <code>foo</code> 函数，该函数就会立即调用。作为参数的 JSON 数据被视为 JavaScript 对象，而不是字符串，因此避免了使用 <code>JSON.parse</code> 的步骤。</p><h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h3><p>WebSocket 是一种通信协议，使用 <code>ws://</code>（非加密）和 <code>wss://</code>（加密）作为协议前缀。该协议不实行同源政策，只要服务器支持，就可以通过它进行跨源通信。</p><p>下面是一个例子，浏览器发出的 WebSocket 请求的头信息</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /chat HTTP/<span class="number">1.1</span></span><br><span class="line">Host: server.example.com</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==</span><br><span class="line">Sec-WebSocket-Protocol: chat, superchat</span><br><span class="line">Sec-WebSocket-Version: <span class="number">13</span></span><br><span class="line">Origin: http:<span class="comment">//example.com</span></span><br></pre></td></tr></table></figure><p>上面代码中，有一个字段是 Origin，表示该请求的请求源（origin），即发自哪个域名。</p><p>正是因为有了 Origin 这个字段，所以 WebSocket 才没有实行同源政策。因为服务器可以根据这个字段，判断是否许可本次通信。如果该域名在白名单内，服务器就会做出如下回应。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">101</span> Switching Protocols</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=</span><br><span class="line">Sec-WebSocket-Protocol: chat</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.nirongfei.site/blog-hexo/2018/01/15/frontend/180115/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog-hexo/images/avatar.png"><meta itemprop="name" content="阳明先生"><meta itemprop="description" content="知之真切笃实处即是行 行之明觉精察处即是知"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="阳明先生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/blog-hexo/2018/01/15/frontend/180115/" class="post-title-link" itemprop="url">移动端网页自适应方案总结</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-01-15 00:00:00" itemprop="dateCreated datePublished" datetime="2018-01-15T00:00:00+08:00">2018-01-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-11-18 16:01:08" itemprop="dateModified" datetime="2020-11-18T16:01:08+08:00">2020-11-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog-hexo/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4.9k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="百分比"><a href="#百分比" class="headerlink" title="百分比"></a>百分比</h2><p>在 CSS 中很多属性都可以使用百分比值，正确使用百分比有两个关键点：</p><ol><li>找到当前元素的参照元素；</li></ol><p>某个元素的参照元素不能简单的理解成父元素，还和其定位有关系，比如：</p><ul><li>静态定位元素、相对定位元素的参照元素一般是其父元素；</li><li>绝对定位元素参照元素一般是离它最近的绝对定位、相对定位或者固定定位的父元素，如果不存在则为视口；</li><li>固定定位元素的参照元素一般是视口。</li></ul><ol start="2"><li>找到当前属性的参照属性；</li></ol><p>在 CSS 中很多属性都可以被设置为百分比数值，但是其意义确会有很多不同；总结如下：</p><ul><li><code>padding</code> 百分比是相对于参照元素的宽度而言；</li><li><code>margin</code> 百分比是相对于参照元素的宽度而言；</li><li><code>width</code> 百分比是相对于参照元素的宽度而言；</li><li><code>left、right</code> 百分比是相对于参照元素的宽度而言；</li><li><code>height</code> 百分比是相对于参照元素的高度而言；</li><li><code>top、bottom</code> 百分比是相对于参照元素的高度而言；</li><li><code>line-height</code> 百分比是相当于元素自身文字大小而言；</li><li><code>background-size</code> 百分比是相当于元素自身的宽高而言；</li><li><code>border-radius</code> 百分比是相当于元素自身的宽高而言；</li><li><code>transform</code> 百分比是相当于元素自身的宽高而言；</li><li><code>background-position</code> 百分比和其它的百分比单位表现都不一样，具体可以用以下公式计算：</li><li><code>positionX</code> = (容器的宽度-图片的宽度) * <code>percentX</code>;</li><li><code>positionY</code> = (容器的高度-图片的高度) * <code>percentY</code>;</li></ul><p>以上只总结了较为常见的属性，实际还存在很多其它属性可以被设置为百分比，并可能存在你意想不到的意义。</p><p><code>vw</code> 和 <code>vh</code> 应该就是百分比的一种变种，只不过所有元素的参照元素都是视口，参照属性都是视口的宽高而已；</p><blockquote><p>需要注意在一些 Android 设备中软键盘弹出会影响视口的尺寸（具体是高度变小），因此会对以百分比或者 <code>vw</code>、<code>vh</code> 为单位的属性造成影响；而且并不能通过强制设置视口尺寸来解决这个问题，因为在一些 Android 设备中会对脚本代码设置的视口尺寸再进行一次校验来保证视口尺寸比例不发生变化，具体情况请查看示例。</p></blockquote><p>百分比方式在处理文字大小的自适应上会比较麻烦，另外在处理图片的自适应也有问题，只能使用 <code>img</code> 标签的方式来实现，这样就会导致不能把图片合成精灵图（就目前来说把小图片合成精灵图还是有必要的）；另外设计稿一般都是固定数值的，所以重构页面时你得自己计算出百分比数值，虽然计算量不大，其实也是有那么一点点麻烦的。</p><h2 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h2><p>媒体查询方式的问题在于只能处理特定状态，而“绝对自适应”其实可以理解成有无限多的状态。</p><h2 id="REM"><a href="#REM" class="headerlink" title="REM"></a>REM</h2><p>REM 方式一般要在页面里边加入如下脚本:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">doc, win</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $body = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line">  <span class="keyword">var</span> docEl = doc.documentElement,</span><br><span class="line">    resizeEvt = <span class="string">&#x27;orientationchange&#x27;</span> <span class="keyword">in</span> <span class="built_in">window</span> ? <span class="string">&#x27;orientationchange&#x27;</span> : <span class="string">&#x27;resize&#x27;</span>,</span><br><span class="line">    recalc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> clientWidth = docEl.clientWidth</span><br><span class="line">      <span class="keyword">if</span> (!clientWidth) <span class="keyword">return</span></span><br><span class="line">      clientWidth = clientWidth &gt; <span class="number">750</span> ? <span class="number">750</span> : clientWidth <span class="comment">//防止被放大保证宽屏效果</span></span><br><span class="line">      <span class="comment">//以宽750px为例子，并扩大100倍，尽可能的保证精度</span></span><br><span class="line">      docEl.style.fontSize = <span class="number">100</span> * (clientWidth / <span class="number">750</span>) + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">      <span class="comment">//缩放之后再显示页面，防止缩放过程被观察到，影响体验</span></span><br><span class="line">      $body.style.visibility = <span class="string">&#x27;visible&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">if</span> (!doc.addEventListener) <span class="keyword">return</span></span><br><span class="line">  win.addEventListener(resizeEvt, recalc, <span class="literal">false</span>)</span><br><span class="line">  doc.addEventListener(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, recalc, <span class="literal">false</span>)</span><br><span class="line">&#125;)(<span class="built_in">document</span>, <span class="built_in">window</span>)</span><br></pre></td></tr></table></figure><p>需要注意的是脚本中 <code>750</code> 表示的是设计稿的宽度, 而扩大 100 倍的主要原因是让换算结果更加精确。</p><p>REM 方式理论上来说已经能解决问题了，但是实际上还是会有一些问题，最核心的问题在于数值的精度问题（不同浏览器处理浮点数时所保留的精度不一样），比如：</p><ul><li>较小数值可能会因为精度问题导致实际渲染大小为 0，比如边框等；</li><li>在 Android 系统里边有可能出现即使设置了 <code>height=line-height</code> 时文字依然不能完全垂直居中的情况，如果使用 <code>rem</code>，<code>font-size</code>、<code>height</code>、<code>line-height</code> 均是小数，精度问题会导致问题更明显。</li></ul><h2 id="inital-scale"><a href="#inital-scale" class="headerlink" title="inital-scale"></a>inital-scale</h2><p>上述方式归根到底都属于间接缩放的方式，需要注意的是 WebView 提供了一个直接缩放整个页面的方法，那就是 <code>meta</code> 标签中 <code>inital-scale</code>属性，也就说可以控制这个属性来缩放页面，来达到绝对自适应，控制脚本和 REM 控制脚本类似：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">doc, win</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> docEl = doc.documentElement,</span><br><span class="line">    resizeEvt = <span class="string">&#x27;orientationchange&#x27;</span> <span class="keyword">in</span> <span class="built_in">window</span> ? <span class="string">&#x27;orientationchange&#x27;</span> : <span class="string">&#x27;resize&#x27;</span>,</span><br><span class="line">    recalc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> clientWidth = docEl.clientWidth</span><br><span class="line">      <span class="keyword">if</span> (!clientWidth) <span class="keyword">return</span></span><br><span class="line">      clientWidth = clientWidth &gt; <span class="number">750</span> ? <span class="number">750</span> : clientWidth <span class="comment">//防止被放大保证宽屏效果</span></span><br><span class="line">      <span class="built_in">document</span></span><br><span class="line">        .querySelector(<span class="string">&#x27;meta[name=viewport]&#x27;</span>)</span><br><span class="line">        .setAttribute(</span><br><span class="line">          <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;width=750, initial-scale=&#x27;</span> + clientWidth / <span class="number">750</span> + <span class="string">&#x27;, maximum-scale=1.0, user-scalable=0&#x27;</span></span><br><span class="line">        )</span><br><span class="line">      <span class="built_in">document</span>.querySelector(<span class="string">&#x27;body&#x27;</span>).setAttribute(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;visibility:visible;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">if</span> (!doc.addEventListener) <span class="keyword">return</span></span><br><span class="line">  doc.addEventListener(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, recalc, <span class="literal">false</span>)</span><br><span class="line">&#125;)(<span class="built_in">document</span>, <span class="built_in">window</span>)</span><br></pre></td></tr></table></figure><p>这种方式异常的简单方便，基本不存在 REM 的精度问题，移动端细边框等问题完全不需要考虑，但是这个方式的缺点也很明显:</p><ul><li>存在极少数的设备不支持 <code>meta</code> 标签的 <code>initial-scale</code> 属性；</li><li>脚本中所涉及 <code>meta</code> 标签中的那些属性不能再被其它脚本所处理；</li><li>由于这个方式是缩放整个页面的方式来实现自适应，那么页面里边所有的样式都得遵循这种方式（就实际情况来看局限性很大），另外渲染性能也偏低（如果页面存在大量动画，不建议采用这种方式）。</li></ul><h2 id="transform-scale"><a href="#transform-scale" class="headerlink" title="transform scale"></a>transform scale</h2><p>页面缩放除了 <code>meta</code> 标签的 <code>initial-scale</code> 方式，CSS3 的 <code>tranform</code> 也可以做到，而且 <code>meta</code> 标签的 <code>initial-scale</code> 是缩放整个页面，会导致和其它样式冲突。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">doc, win</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> docEl = doc.documentElement,</span><br><span class="line">    resizeEvt = <span class="string">&#x27;orientationchange&#x27;</span> <span class="keyword">in</span> <span class="built_in">window</span> ? <span class="string">&#x27;orientationchange&#x27;</span> : <span class="string">&#x27;resize&#x27;</span>,</span><br><span class="line">    recalc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> clientWidth = docEl.clientWidth</span><br><span class="line">      <span class="keyword">if</span> (!clientWidth) <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">var</span> $bodyContent = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.body-content&#x27;</span>)</span><br><span class="line">      <span class="keyword">var</span> $body = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line">      <span class="keyword">var</span> percent = clientWidth / <span class="number">750</span></span><br><span class="line">      percent = percent &gt; <span class="number">1</span> ? <span class="number">1</span> : percent <span class="comment">//防止被放大保证宽屏效果</span></span><br><span class="line">      <span class="keyword">var</span> othersHeight = $body.clientHeight - $bodyContent.clientHeight <span class="comment">//计算其它元素的高度</span></span><br><span class="line">      $bodyContent.setAttribute(</span><br><span class="line">        <span class="string">&#x27;style&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;width:750px;transform:scale(&#x27;</span> +</span><br><span class="line">          percent +</span><br><span class="line">          <span class="string">&#x27;);transform-origin:0 0;-webkit-transform:scale(&#x27;</span> +</span><br><span class="line">          percent +</span><br><span class="line">          <span class="string">&#x27;);-webkit-transform-origin:0 0;margin:auto;&#x27;</span></span><br><span class="line">      )</span><br><span class="line">      <span class="keyword">var</span> lastStyle = $bodyContent.getAttribute(<span class="string">&#x27;style&#x27;</span>)</span><br><span class="line">      <span class="keyword">var</span> articleHeight = $bodyContent.clientHeight * percent</span><br><span class="line">      $body.setAttribute(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;visibility:visible;height:&#x27;</span> + (articleHeight + othersHeight) + <span class="string">&#x27;px;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">if</span> (!doc.addEventListener) <span class="keyword">return</span></span><br><span class="line">  doc.addEventListener(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, recalc, <span class="literal">false</span>)</span><br><span class="line">&#125;)(<span class="built_in">document</span>, <span class="built_in">window</span>)</span><br></pre></td></tr></table></figure><p>上述脚本就解决了 <code>meta</code> 标签 <code>initial-scale</code> 方式的前两个缺陷。</p><blockquote><p>需要注意的是脚本中还额外处理了页面的高度，因为 CSS3 的 <code>tranform</code> 方式只影响了元素视觉效果，不会影响元素的占位尺寸，如果页面出现滚动条，缩放之后滚动高度还是不变，此时需要设置页面高度为缩放之后的高度。</p></blockquote><p>除了高度问题，这种方式还需要注意一些问题：</p><ul><li><p><code>tansform</code> 会导致其内部元素的 <code>fixed</code> 定位失效，变为 <code>absolute</code> 定位；</p><p><code>fixed</code> 定位失效的真正原因在于 <code>transform</code> 影响了 <code>fixed</code> 定位元素的堆叠上下文，简单来说 <code>fixed</code> 定位的元素，如果其祖先元素存在非 <code>none</code> 的 <code>transform</code> 值，那么该元素将相对于设定了 <code>transform</code> 的祖先元素定位，而不是原本相对于视口。</p><p><code>fixed</code> 定位失效的问题可以通过把元素单独抽离出来并在外部多添加一层，外部容器层使用 <code>fixed</code> 定位，内部元素使用 <code>absolute</code> 定位来解决。</p></li><li><p>缩放区域得清除浮动，否则会导致高度计算异常；</p></li><li><p>全屏布局不适用这种方法；</p><p>全屏布局是指页面刚好在一个屏幕的范围内，这种布局需要既需要自适应宽度的变化，还需要自适应高度的变化，一般方法为让页面主内容区域在屏幕中居中，内容元素自适应宽度，元素之间的间隙自适应高度；<br>某些时候甚至需要使用 media query 针对不同的情况设置不同的值。</p></li><li><p>嵌入 <code>iframe</code> 时，需要在父页面中设置缩放比；</p><p>因为 IOS 中嵌入在 <code>iframe</code> 中的页面的 <code>clientWidth</code> 由页面本身的内容宽度决定，和父页面的 <code>iframe</code> 的宽度没有关系，IOS 的这种机制会导致缩放比计算异常。</p></li></ul><div align="center"><img src="https://newbieyoung.github.io/images/auto-suit-website-0.png"></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><nav class="pagination"><a class="extend prev" rel="prev" href="/blog-hexo/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/blog-hexo/">1</a><span class="page-number current">2</span><a class="page-number" href="/blog-hexo/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/blog-hexo/page/7/">7</a><a class="extend next" rel="next" href="/blog-hexo/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="阳明先生" src="/blog-hexo/images/avatar.png"><p class="site-author-name" itemprop="name">阳明先生</p><div class="site-description" itemprop="description">知之真切笃实处即是行 行之明觉精察处即是知</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/blog-hexo/archives/"><span class="site-state-item-count">63</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/blog-hexo/categories/"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/blog-hexo/tags/"><span class="site-state-item-count">25</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/NiRongFei" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;NiRongFei" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">阳明先生</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">442k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">6:42</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/blog-hexo/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/blog-hexo/lib/velocity/velocity.min.js"></script><script src="/blog-hexo/lib/velocity/velocity.ui.min.js"></script><script src="/blog-hexo/js/utils.js"></script><script src="/blog-hexo/js/motion.js"></script><script src="/blog-hexo/js/schemes/pisces.js"></script><script src="/blog-hexo/js/next-boot.js"></script><script async src="/js/typing.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE)</script></body></html>